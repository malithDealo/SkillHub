<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SkillHub - Discover Skills Near You</title>
    <link rel="stylesheet" href="css/services.css" />
    <link rel="stylesheet" href="components/footer1.css" />
    <style>
      /* Updated Navbar Styles - Consistent with Dashboard */
      .navbar {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        background: #ffffff;
        border-bottom: 1px solid #e9ecef;
        padding: 0 2rem;
        height: 80px;
        z-index: 1000;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      }

      .nav-container {
        display: flex;
        align-items: center;
        justify-content: space-between;
        height: 100%;
        max-width: 1200px;
        margin: 0 auto;
      }

      .nav-brand {
        display: flex;
        align-items: center;
        gap: 12px;
        font-weight: bold;
        color: #333;
      }

      .logo {
        font-size: 1.5rem;
      }

      .brand-text {
        font-size: 1.3rem;
        color: #4caf50;
      }

      .nav-menu {
        display: flex;
        gap: 2rem;
      }

      .nav-link {
        text-decoration: none;
        color: #666;
        font-weight: 500;
        padding: 8px 16px;
        border-radius: 6px;
        transition: all 0.3s ease;
      }

      .nav-link:hover {
        color: #4caf50;
        background: #f0f8f0;
      }

      .nav-link.active {
        color: #4caf50;
        background: #e8f5e8;
        font-weight: 600;
      }

      .nav-profile {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .nav-user {
        font-weight: 500;
        color: #333;
      }

      .profile-avatar {
        width: 40px;
        height: 40px;
        background: #4caf50;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 1.2rem;
      }

      /* Update hero section to account for new navbar height */
      .hero,
      .teachers-hero {
        padding-top: 120px; /* Increased to account for navbar */
      }

      /* Wishlist Button Styles */
      .wishlist-section {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 1rem;
        margin-bottom: 2rem;
        padding: 1rem;
        background: white;
        border-radius: 12px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      }

      .wishlist-btn {
        background: #e8f5e8;
        color: #4caf50;
        border: 2px solid #4caf50;
        padding: 0.75rem 1.5rem;
        border-radius: 25px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 600;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .wishlist-btn:hover {
        background: #4caf50;
        color: white;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
      }

      .wishlist-btn.added {
        background: #4caf50;
        color: white;
        cursor: default;
      }

      .wishlist-btn.added:hover {
        transform: none;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      }

      .wishlist-info {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
      }

      .skill-name {
        font-size: 1.2rem;
        font-weight: 600;
        color: #333;
      }

      .skill-description {
        font-size: 0.9rem;
        color: #666;
        text-align: center;
      }

      /* Back buttons styling */
      .back-buttons {
        display: flex;
        gap: 1rem;
        align-items: center;
      }

      .dashboard-btn {
        background: #45a049;
        border-color: #45a049;
      }

      .dashboard-btn:hover {
        background: #3d8b40;
      }

      /* Responsive navbar */
      @media (max-width: 768px) {
        .nav-menu {
          display: none;
        }

        .navbar {
          padding: 0 1rem;
        }

        .nav-container {
          gap: 1rem;
        }

        .nav-profile {
          gap: 8px;
        }

        .nav-user {
          font-size: 0.9rem;
        }

        .profile-avatar {
          width: 35px;
          height: 35px;
          font-size: 1rem;
        }

        .wishlist-section {
          flex-direction: column;
          text-align: center;
        }
      }

      @media (max-width: 480px) {
        .nav-brand .brand-text {
          font-size: 1.1rem;
        }

        .logo {
          font-size: 1.3rem;
        }
      }
    </style>
  </head>
  <body>
    <!-- Updated Navigation Bar - Consistent with Dashboard -->
    <nav class="navbar">
      <div class="nav-container">
        <div class="nav-brand">
          <img
            src="images/SkillHub LOGO 3.png"
            alt="SkillHub Logo"
            class="logo"
          />
          <span class="brand-text">SkillHub</span>
        </div>

        <div class="nav-menu">
          <a href="dashboard.html" class="nav-link">Dashboard</a>
          <a href="services.html" class="nav-link active">Find Teachers</a>
          <a href="dashboard.html#my-learning" class="nav-link">My Learning</a>
          <a href="community.html" class="nav-link">Community</a>
        </div>

        <div class="nav-profile">
          <span class="nav-user">Jane Student</span>
          <div class="profile-avatar">
            <span>üë§</span>
          </div>
        </div>
      </div>
    </nav>

    <!-- Skill Categories View -->
    <div id="skill-categories-view">
      <!-- Hero Section -->
      <section class="hero">
        <div class="hero-background-circles">
          <div class="hero-circle circle-1"></div>
          <div class="hero-circle circle-2"></div>
          <div class="hero-circle circle-3"></div>
          <div class="hero-circle circle-4"></div>
          <div class="hero-circle circle-5"></div>
          <div class="hero-circle circle-6"></div>
          <div class="hero-circle circle-7"></div>
          <div class="hero-circle circle-8"></div>
          <div class="hero-circle circle-9"></div>
          <div class="hero-circle circle-10"></div>
          <div class="hero-circle circle-11"></div>
          <div class="hero-circle circle-12"></div>
        </div>
        <div class="container">
          <div class="hero-content">
            <h1>Discover Skills Near You</h1>
            <p>
              Find the perfect teacher for any skill you want to learn in your
              neighborhood
            </p>
            <div class="search-container">
              <input
                type="text"
                class="search-input"
                placeholder="What skill do you want to learn?"
              />
              <button class="search-btn">üîç</button>
            </div>
          </div>
        </div>
      </section>

      <!-- Main Content -->
      <section class="main-content">
        <div class="container">
          <div class="section-title">
            <h2>Skill Categories</h2>
          </div>

          <div class="skills-categories">
            <!-- Arts & Crafts -->
            <div class="category-section">
              <div class="category-header">
                <h3>Arts & Crafts</h3>
              </div>
              <ul class="category-skills">
                <li data-skill="Painting">Painting</li>
                <li data-skill="Pottery">Pottery</li>
                <li data-skill="Jewelry Making">Jewelry Making</li>
                <li data-skill="Drawing">Drawing</li>
                <li data-skill="Sculpture">Sculpture</li>
                <li data-skill="Photography">Photography</li>
              </ul>
            </div>

            <!-- Music & Performance -->
            <div class="category-section">
              <div class="category-header">
                <h3>Music & Performance</h3>
              </div>
              <ul class="category-skills">
                <li data-skill="Guitar">Guitar</li>
                <li data-skill="Piano">Piano</li>
                <li data-skill="Drums">Drums</li>
                <li data-skill="Singing">Singing</li>
                <li data-skill="Violin">Violin</li>
                <li data-skill="Public Speaking">Public Speaking</li>
              </ul>
            </div>

            <!-- Languages -->
            <div class="category-section">
              <div class="category-header">
                <h3>Languages</h3>
              </div>
              <ul class="category-skills">
                <li data-skill="Conversational Practice">
                  Conversational Practice
                </li>
                <li data-skill="Writing Grammar">Writing Grammar</li>
                <li data-skill="Business Language">Business Language</li>
              </ul>
            </div>

            <!-- Technology -->
            <div class="category-section">
              <div class="category-header">
                <h3>Technology</h3>
              </div>
              <ul class="category-skills">
                <li data-skill="Computer Basics">Computer Basics</li>
                <li data-skill="Social Media">Social Media</li>
                <li data-skill="Mobile Apps">Mobile Apps</li>
                <li data-skill="Digital Literacy">Digital Literacy</li>
              </ul>
            </div>

            <!-- Cooking & Culinary -->
            <div class="category-section">
              <div class="category-header">
                <h3>Cooking & Culinary</h3>
              </div>
              <ul class="category-skills">
                <li data-skill="Traditional Cuisines">Traditional Cuisines</li>
                <li data-skill="Baking">Baking</li>
                <li data-skill="Nutrition">Nutrition</li>
                <li data-skill="Food Safety">Food Safety</li>
                <li data-skill="Wine Pairing">Wine Pairing</li>
              </ul>
            </div>

            <!-- Home & Garden -->
            <div class="category-section">
              <div class="category-header">
                <h3>Home & Garden</h3>
              </div>
              <ul class="category-skills">
                <li data-skill="Gardening">Gardening</li>
                <li data-skill="Home Repair">Home Repair</li>
                <li data-skill="Organization">Organization</li>
                <li data-skill="Interior Design">Interior Design</li>
              </ul>
            </div>

            <!-- Health & Wellness -->
            <div class="category-section">
              <div class="category-header">
                <h3>Health & Wellness</h3>
              </div>
              <ul class="category-skills">
                <li data-skill="Yoga Meditation">Yoga Meditation</li>
                <li data-skill="Fitness">Fitness</li>
                <li data-skill="Nutrition">Nutrition</li>
                <li data-skill="Mental Health">Mental Health</li>
              </ul>
            </div>

            <!-- Professional Skills -->
            <div class="category-section">
              <div class="category-header">
                <h3>Professional Skills</h3>
              </div>
              <ul class="category-skills">
                <li data-skill="Resume Writing">Resume Writing</li>
                <li data-skill="Interview Prep">Interview Prep</li>
                <li data-skill="Business Skills">Business Skills</li>
                <li data-skill="Leadership">Leadership</li>
              </ul>
            </div>

            <!-- Traditional Crafts -->
            <div class="category-section">
              <div class="category-header">
                <h3>Traditional Crafts</h3>
              </div>
              <ul class="category-skills">
                <li data-skill="Weaving Carpentry">Weaving Carpentry</li>
                <li data-skill="Traditional Medicine">Traditional Medicine</li>
              </ul>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- Teachers View -->
    <div id="teachers-view" style="display: none">
      <!-- Teachers Hero Section -->
      <section class="teachers-hero">
        <div class="hero-background-circles">
          <div class="hero-circle circle-1"></div>
          <div class="hero-circle circle-2"></div>
          <div class="hero-circle circle-3"></div>
          <div class="hero-circle circle-4"></div>
          <div class="hero-circle circle-5"></div>
          <div class="hero-circle circle-6"></div>
          <div class="hero-circle circle-7"></div>
          <div class="hero-circle circle-8"></div>
          <div class="hero-circle circle-9"></div>
          <div class="hero-circle circle-10"></div>
          <div class="hero-circle circle-11"></div>
          <div class="hero-circle circle-12"></div>
        </div>
        <div class="container">
          <div class="hero-content">
            <h1>Find Expert Teachers</h1>
            <p id="skill-subtitle">
              Connect with skilled instructors in your neighborhood ready to
              share their knowledge
            </p>
            <div class="search-container">
              <input
                type="text"
                class="search-input"
                placeholder="Search for teachers..."
              />
              <button class="search-btn">üîç</button>
            </div>
          </div>
        </div>
      </section>

      <!-- Teachers Content -->
      <section class="teachers-content">
        <div class="container">
          <!-- Add to Wishlist Section -->
          <div class="wishlist-section">
            <div class="wishlist-info">
              <div class="skill-name" id="current-skill-name">Guitar</div>
              <div class="skill-description">
                Save this skill to learn later
              </div>
            </div>
            <button
              class="wishlist-btn"
              id="wishlist-btn"
              onclick="addToWishlist()"
            >
              <span>üíö</span>
              <span id="wishlist-btn-text">Add to Wishlist</span>
            </button>
          </div>

          <div class="teachers-header">
            <button class="back-btn" onclick="showSkillCategories()">
              ‚Üê Back to Categories
            </button>
            <div class="teachers-info">
              <span id="teacher-count">247 teachers found</span>
              <span>in your area</span>
            </div>
            <div class="sort-options">
              <label>Sort by:</label>
              <select id="sort-select">
                <option value="rating">Most Popular</option>
                <option value="price">Price: Low to High</option>
                <option value="distance">Distance</option>
              </select>
            </div>
          </div>

          <div class="teachers-grid" id="teachers-grid">
            <!-- Teacher cards will be dynamically inserted here -->
          </div>
        </div>
      </section>
    </div>

    <!-- Teacher Detail Popup -->
    <div id="teacher-popup" class="popup-overlay" style="display: none">
      <div class="popup-content">
        <button class="popup-close" onclick="closeTeacherPopup()">√ó</button>
        <div class="teacher-detail">
          <div class="teacher-avatar">
            <span id="popup-avatar"></span>
          </div>
          <div class="teacher-info">
            <h2 id="popup-name"></h2>
            <div class="teacher-rating">
              <span id="popup-rating"></span>
              <span id="popup-reviews"></span>
            </div>
            <div class="teacher-distance">
              <span id="popup-distance"></span>
            </div>
          </div>
        </div>

        <div class="teacher-description">
          <p id="popup-description"></p>
        </div>

        <div class="skills-section">
          <h3>Skills Offered:</h3>
          <div id="popup-skills" class="skills-tags"></div>
        </div>

        <div class="pricing-section">
          <div class="price-info">
            <span class="price" id="popup-price"></span>
            <span class="availability" id="popup-availability"></span>
          </div>
        </div>

        <div class="popup-actions">
          <button class="btn-secondary" onclick="closeTeacherPopup()">
            Go back
          </button>
          <button class="btn-primary" onclick="connectWithTeacher()">
            Connect
          </button>
        </div>
      </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="connect-modal" class="modal-overlay" style="display: none">
      <div class="modal-content">
        <h3>Connect with Teacher</h3>
        <p>
          Are you sure you want to connect with
          <span id="connect-teacher-name"></span>?
        </p>
        <div class="modal-actions">
          <button class="btn-secondary" onclick="closeConnectModal()">
            Cancel
          </button>
          <button class="btn-primary" onclick="confirmConnection()">
            Yes, Connect
          </button>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
      <!-- Header Section -->
      <div class="footer-header">
        <h1 class="footer-logo">SkillHub</h1>
        <p class="footer-tagline">Connect ‚Ä¢ Learn ‚Ä¢ Grow ‚Ä¢ Share</p>
      </div>
      
      <!-- Main Content Section -->
      <div class="footer-content">
        <!-- Column 1: Description and Social Media -->
         
        <div class="footer-column">
            <h3 class="footer-column-title">
                <img src="images/SkillHub LOGO 3.png" alt="SkillHub Logo" class="footer-logo-img">
                <span class="brand-text">SkillHub</span>
            </h3>
            <p>Connecting communities through skill sharing. Learn from your neighbors, teach what you love, and build lasting relationships in your local area.</p>
            <div class="social-icons">
                <a href="#" aria-label="Facebook"> <div class="icon-circle"><img src="images\fb.png" alt="Facebook"> </div></a>
                <a href="#" aria-label="Twitter"> <div class="icon-circle"><img src="images\mdi_twitter.png" alt="Twitter"> </div></a>
                <a href="#" aria-label="Instagram"> <div class="icon-circle"><img src="images\mdi_instagram.png" alt="Instagram"> </div></a>
                <a href="#" aria-label="LinkedIn"> <div class="icon-circle"><img src="images\mdi_linkedin.png" alt="LinkedIn"> </div></a>
            </div>
        </div>
         
        <!-- Column 2: Quick Links -->
         <div class="footer-columnn">
        <div class="footer-column">
            <h3 class="footer-column-title">Quick Links</h3>
            <ul>
                <li><a href="dashboard.html">Home</a></li>
                <li><a href="#about">About Us</a></li>
                <li><a href="#how-it-works">How it Works</a></li>
                <li><a href="services.html">Services</a></li>
                <li><a href="community.html">Community</a></li>
            </ul>
        </div>
         </div>
        <!-- Column 3: Support -->
         <div class="footer-columnn">
        <div class="footer-column">
            <h3 class="footer-column-title">Support</h3>
            <ul>
                <li><a href="#help">Help Center</a></li>
                <li><a href="#safety">Safety Guidelines</a></li>
                <li><a href="#contact">Contact Us</a></li>
                <li><a href="#faq">FAQs</a></li>
                <li><a href="#feedback">Give Feedback</a></li>
                <li><a href="#report">Report Issue</a></li>
                <li><a href="#accessibility">Accessibility</a></li>
            </ul>
        </div>
         </div>
        
        <!-- Column 4: Legal -->
         <div class="footer-columnn">
        <div class="footer-column">
            <h3 class="footer-column-title">Legal</h3>
            <ul>
                <li><a href="#terms">Terms of Services</a></li>
                <li><a href="#privacy">Privacy policy</a></li>
                <li><a href="#cookies">Cookie Policy</a></li>
                <li><a href="#guidelines">Community Guidelines</a></li>
            </ul>
        </div>
        </div>
        <!-- Column 5: Stay Connected -->
         <div class="footer-columnn">
         <div class="footer-column">
        <div class="footer-column stay-connected">
            <h3 class="footer-column-title">Stay Connected</h3>
            <p>Get updates on new skills, community events, and platform features.</p>
            <form class="subscription-form">
                <input type="email" placeholder="Enter your email address" aria-label="Email Address">
                <button type="submit">Subscribe</button>
            </form>
        </div>
    </div>
    </div>
        
    </footer>
    <!-- STEP 1: Add this div tag to any HTML page where you want the chatbot -->
  <div id="skillhub-chatbot-container"></div>

  <!-- STEP 2: Add this script tag once per page (preferably before closing body tag) -->
  <script>
    // Auto-load SkillHub chatbot when div is found
    document.addEventListener('DOMContentLoaded', function () {
      const container = document.getElementById('skillhub-chatbot-container');
      if (!container) return;

      // Inject CSS styles
      const styles = `
        <style id="skillhub-chatbot-styles">
        .skillhub-chat-icon {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(76, 175, 80, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 1001;
            border: none;
        }

        .skillhub-chat-icon:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 25px rgba(76, 175, 80, 0.5);
        }

        .skillhub-chat-icon.pulsing {
            animation: skillhub-pulse 2s infinite;
        }

        @keyframes skillhub-pulse {
            0% { box-shadow: 0 4px 20px rgba(76, 175, 80, 0.4); }
            50% { box-shadow: 0 4px 30px rgba(76, 175, 80, 0.8); }
            100% { box-shadow: 0 4px 20px rgba(76, 175, 80, 0.4); }
        }

        .skillhub-chat-icon svg {
            width: 28px;
            height: 28px;
            fill: white;
        }

        .skillhub-chat-container {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 400px;
            max-width: calc(100vw - 40px);
            height: 600px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.2);
            display: none;
            flex-direction: column;
            overflow: hidden;
            z-index: 1000;
            animation: skillhub-slideUp 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes skillhub-slideUp {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .skillhub-chat-header {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .skillhub-chat-header h3 {
            font-family: 'Arial', sans-serif;
            font-size: 18px;
            margin-bottom: 5px;
            margin: 0;
        }

        .skillhub-chat-header p {
            font-size: 14px;
            opacity: 0.9;
            margin: 5px 0 0 0;
        }

        .skillhub-close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s ease;
        }

        .skillhub-close-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .skillhub-voice-status {
            position: absolute;
            top: 15px;
            left: 15px;
            font-size: 12px;
            background: rgba(255, 255, 255, 0.2);
            padding: 4px 8px;
            border-radius: 12px;
            display: none;
        }

        .skillhub-voice-status.active {
            display: block;
            animation: skillhub-fadeIn 0.3s ease;
        }

        @keyframes skillhub-fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .skillhub-chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
        }

        .skillhub-message {
            margin-bottom: 16px;
            animation: skillhub-messageSlide 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes skillhub-messageSlide {
            from { 
                opacity: 0; 
                transform: translateY(20px) scale(0.95);
            }
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1);
            }
        }

        .skillhub-message.bot {
            text-align: left;
        }

        .skillhub-message.user {
            text-align: right;
        }

        .skillhub-message-content {
            display: inline-block;
            max-width: 85%;
            padding: 14px 18px;
            border-radius: 20px;
            font-size: 14px;
            line-height: 1.5;
            word-wrap: break-word;
            position: relative;
        }

        .skillhub-message.bot .skillhub-message-content {
            background: white;
            color: #333;
            border-bottom-left-radius: 8px;
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.1);
            border: 1px solid #e8e8e8;
        }

        .skillhub-message.user .skillhub-message-content {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border-bottom-right-radius: 8px;
            box-shadow: 0 3px 15px rgba(76, 175, 80, 0.3);
        }

        .skillhub-message.voice .skillhub-message-content::before {
            content: "üé§ ";
            font-size: 12px;
        }

        .skillhub-typing-indicator {
            display: none;
            align-items: center;
            gap: 8px;
            color: #666;
            font-style: italic;
            margin-bottom: 15px;
        }

        .skillhub-typing-dots {
            display: flex;
            gap: 4px;
        }

        .skillhub-typing-dots span {
            width: 8px;
            height: 8px;
            background: #4CAF50;
            border-radius: 50%;
            animation: skillhub-typing 1.4s infinite;
        }

        .skillhub-typing-dots span:nth-child(2) { animation-delay: 0.2s; }
        .skillhub-typing-dots span:nth-child(3) { animation-delay: 0.4s; }

        @keyframes skillhub-typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }

        .skillhub-voice-controls {
            display: flex;
            justify-content: center;
            padding: 10px 20px;
            background: white;
            border-top: 1px solid #e0e0e0;
            gap: 15px;
        }

        .skillhub-voice-btn {
            width: 50px;
            height: 50px;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            position: relative;
        }

        .skillhub-voice-btn.record {
            background: linear-gradient(135deg, #ff4757, #ff3742);
            color: white;
        }

        .skillhub-voice-btn.record:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 20px rgba(255, 71, 87, 0.4);
        }

        .skillhub-voice-btn.record.recording {
            animation: skillhub-recordPulse 1s infinite;
        }

        @keyframes skillhub-recordPulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255, 71, 87, 0.7); }
            50% { box-shadow: 0 0 0 10px rgba(255, 71, 87, 0); }
        }

        .skillhub-voice-btn.stop {
            background: linear-gradient(135deg, #ffa502, #ff6348);
            color: white;
        }

        .skillhub-voice-btn.play {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
        }

        .skillhub-voice-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .skillhub-chat-input {
            display: flex;
            padding: 20px;
            background: white;
            border-top: 1px solid #e0e0e0;
            gap: 10px;
        }

        .skillhub-chat-input input {
            flex: 1;
            padding: 14px 18px;
            border: 2px solid #e8e8e8;
            border-radius: 25px;
            outline: none;
            font-size: 14px;
            transition: all 0.2s ease;
            background: #f8f9fa;
        }

        .skillhub-chat-input input:focus {
            border-color: #4CAF50;
            background: white;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .skillhub-send-btn {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            border: none;
            border-radius: 50%;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .skillhub-send-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 20px rgba(76, 175, 80, 0.4);
        }

        .skillhub-send-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .skillhub-audio-visualizer {
            display: none;
            justify-content: center;
            align-items: center;
            height: 40px;
            margin: 10px 0;
        }

        .skillhub-audio-visualizer.active {
            display: flex;
        }

        .skillhub-audio-bar {
            width: 3px;
            height: 10px;
            background: #4CAF50;
            margin: 0 2px;
            border-radius: 2px;
            animation: skillhub-audioWave 1s infinite;
        }

        .skillhub-audio-bar:nth-child(2) { animation-delay: 0.1s; }
        .skillhub-audio-bar:nth-child(3) { animation-delay: 0.2s; }
        .skillhub-audio-bar:nth-child(4) { animation-delay: 0.3s; }
        .skillhub-audio-bar:nth-child(5) { animation-delay: 0.4s; }

        @keyframes skillhub-audioWave {
            0%, 100% { height: 10px; }
            50% { height: 30px; }
        }

        .skillhub-chat-messages::-webkit-scrollbar {
            width: 6px;
        }

        .skillhub-chat-messages::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .skillhub-chat-messages::-webkit-scrollbar-thumb {
            background: #4CAF50;
            border-radius: 10px;
        }

        .skillhub-chat-messages::-webkit-scrollbar-thumb:hover {
            background: #45a049;
        }

        .skillhub-error-message {
            background: #ffe6e6;
            color: #d8000c;
            padding: 10px;
            border-radius: 8px;
            margin: 10px 20px;
            font-size: 12px;
            border-left: 4px solid #d8000c;
        }

        @media (max-width: 480px) {
            .skillhub-chat-container {
                width: calc(100vw - 20px);
                height: calc(100vh - 120px);
                right: 10px;
                bottom: 90px;
            }
            
            .skillhub-chat-icon {
                right: 15px;
                bottom: 15px;
            }
        }
        </style>
    `;

      // Inject HTML structure
      const chatbotHTML = `
        <button class="skillhub-chat-icon" id="skillhub-chat-icon">
            <svg viewBox="0 0 24 24">
                <path d="M20,2H4A2,2 0 0,0 2,4V22L6,18H20A2,2 0 0,0 22,16V4A2,2 0 0,0 20,2M6,9V7H18V9H6M14,11V13H6V11H14M18,15H6V17H18V15Z"/>
            </svg>
        </button>

        <div class="skillhub-chat-container" id="skillhub-chat-container">
            <div class="skillhub-chat-header">
                <div class="skillhub-voice-status" id="skillhub-voice-status">üé§ Listening...</div>
                <button class="skillhub-close-btn" id="skillhub-close-btn">&times;</button>
                <h3>SkillHub AI Assistant</h3>
                <p>Voice & Text Support Available</p>
            </div>

            <div class="skillhub-chat-messages" id="skillhub-chat-messages">
                <div class="skillhub-message bot">
                    <div class="skillhub-message-content">
                        Hello! Welcome to SkillHub. I'm your AI assistant with voice support. You can type or speak to me about our platform features and get help with any technical difficulties. How can I assist you today?
                    </div>
                </div>
            </div>

            <div class="skillhub-audio-visualizer" id="skillhub-audio-visualizer">
                <div class="skillhub-audio-bar"></div>
                <div class="skillhub-audio-bar"></div>
                <div class="skillhub-audio-bar"></div>
                <div class="skillhub-audio-bar"></div>
                <div class="skillhub-audio-bar"></div>
            </div>

            <div class="skillhub-typing-indicator" id="skillhub-typing-indicator">
                <span>SkillHub AI is thinking</span>
                <div class="skillhub-typing-dots">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>

            <div class="skillhub-voice-controls">
                <button class="skillhub-voice-btn record" id="skillhub-record-btn" title="Start Recording">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.53 16.39,17.44 13,17.93V21H11V17.93C7.61,17.44 5,14.53 5,11H7A5,5 0 0,0 12,16A5,5 0 0,0 17,11H19Z"/>
                    </svg>
                </button>
                <button class="skillhub-voice-btn stop" id="skillhub-stop-btn" style="display:none;" title="Stop Recording">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M18,18H6V6H18V18Z"/>
                    </svg>
                </button>
                <button class="skillhub-voice-btn play" id="skillhub-play-btn" style="display:none;" title="Play Last Response">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M8,5.14V19.14L19,12.14L8,5.14Z"/>
                    </svg>
                </button>
            </div>

            <div class="skillhub-chat-input">
                <input type="text" id="skillhub-message-input" placeholder="Type your message or use voice..." />
                <button class="skillhub-send-btn" id="skillhub-send-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M2.01,21L23,12L2.01,3L2,10L17,12L2,14L2.01,21Z"/>
                    </svg>
                </button>
            </div>
        </div>
    `;

      // Check if styles already exist
      if (!document.getElementById('skillhub-chatbot-styles')) {
        document.head.insertAdjacentHTML('beforeend', styles);
      }

      // Insert chatbot HTML
      container.innerHTML = chatbotHTML;

      // Initialize chatbot functionality
      let skillhubChatOpen = false;
      let skillhubIsRecording = false;
      let skillhubMediaRecorder = null;
      let skillhubAudioChunks = [];
      let skillhubLastBotResponse = null;
      let skillhubIsProcessing = false;
      const skillhubSynth = window.speechSynthesis;

      function skillhubToggleChat() {
        const chatContainer = document.getElementById('skillhub-chat-container');
        const chatIcon = document.getElementById('skillhub-chat-icon');
        skillhubChatOpen = !skillhubChatOpen;
        chatContainer.style.display = skillhubChatOpen ? 'flex' : 'none';

        if (skillhubChatOpen) {
          chatIcon.classList.add('pulsing');
          document.getElementById('skillhub-message-input').focus();
        } else {
          chatIcon.classList.remove('pulsing');
          if (skillhubIsRecording) {
            skillhubStopRecording();
          }
        }
      }

      function skillhubAddMessage(content, isUser = false, isVoice = false) {
        const chatMessages = document.getElementById('skillhub-chat-messages');
        const messageDiv = document.createElement('div');
        messageDiv.className = `skillhub-message ${isUser ? 'user' : 'bot'}${isVoice ? ' voice' : ''}`;

        const contentDiv = document.createElement('div');
        contentDiv.className = 'skillhub-message-content';
        contentDiv.innerHTML = content;

        messageDiv.appendChild(contentDiv);
        chatMessages.appendChild(messageDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;

        if (!isUser) {
          skillhubLastBotResponse = content;
          document.getElementById('skillhub-play-btn').style.display = 'flex';
        }
      }

      function skillhubShowTypingIndicator() {
        document.getElementById('skillhub-typing-indicator').style.display = 'flex';
        document.getElementById('skillhub-chat-messages').scrollTop = document.getElementById('skillhub-chat-messages').scrollHeight;
      }

      function skillhubHideTypingIndicator() {
        document.getElementById('skillhub-typing-indicator').style.display = 'none';
      }

      function skillhubShowVoiceStatus(text) {
        const status = document.getElementById('skillhub-voice-status');
        status.textContent = text;
        status.classList.add('active');
      }

      function skillhubHideVoiceStatus() {
        document.getElementById('skillhub-voice-status').classList.remove('active');
      }

      async function skillhubGetBotResponse(userMessage, isVoiceInput = false) {
        const API_KEY = 'AIzaSyCsNiZthfSE-0R-kyqeoonXqEzEiJyu4cg';

        const systemPrompt = `You are a helpful customer support chatbot for SkillHub, a neighborhood-based skill exchange platform. Your role is to:

1. ONLY provide information about SkillHub platform features and help with technical difficulties
2. DO NOT reveal any business strategies, financial projections, marketing plans, or internal company information  
3. Keep responses concise, professional, and conversational (especially for voice interactions)
4. For voice inputs, respond in a natural, spoken style

About SkillHub:
- A web application platform for community-based learning
- Connects people who want to learn skills with those who can teach in their local area
- Features include:
  * Dual user roles (teachers and students)
  * Location-based matching algorithms
  * Multi-tiered verification system for safety
  * Comprehensive review and rating system with level advancement
  * Secure in-app messaging with content monitoring
  * Team formation for collaborative learning groups
  * Multi-language support with filtering options
  * Accessibility features including sign language support
  * Community building tools, forums, and event organization
  * Local business sponsorship opportunities
  * Non-monetary skill-for-skill exchanges

Common help topics:
- Account creation and profile setup
- Finding and connecting with teachers/students nearby
- Understanding the verification process
- Using the review and rating system
- In-app messaging and communication
- Forming and joining learning groups
- Language preferences and accessibility settings
- Technical troubleshooting and platform issues

${isVoiceInput ? 'This was a voice input, so respond conversationally.' : 'This was a text input.'}

If asked about business information, politely redirect to platform features or suggest contacting official channels.`;

        try {
          const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${API_KEY}`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              contents: [{
                parts: [{
                  text: `${systemPrompt}\n\nUser ${isVoiceInput ? '(voice)' : '(text)'}: ${userMessage}`
                }]
              }],
              generationConfig: {
                temperature: 0.7,
                topK: 40,
                topP: 0.95,
                maxOutputTokens: 2048,
              }
            })
          });

          if (!response.ok) {
            throw new Error(`API request failed: ${response.status}`);
          }

          const data = await response.json();
          return data.candidates[0].content.parts[0].text;
        } catch (error) {
          console.error('Error:', error);
          return "I'm sorry, I'm experiencing technical difficulties right now. Please try again later or contact our support team directly for assistance.";
        }
      }

      function skillhubSpeakResponse(text) {
        if (skillhubSynth.speaking) {
          skillhubSynth.cancel();
        }

        const cleanText = text.replace(/[*#_`]/g, '').replace(/\n+/g, '. ');
        const utterance = new SpeechSynthesisUtterance(cleanText);
        utterance.rate = 0.9;
        utterance.pitch = 1.0;
        utterance.volume = 0.8;

        const voices = skillhubSynth.getVoices();
        const preferredVoice = voices.find(voice =>
          voice.lang.includes('en') && (voice.name.includes('Neural') || voice.name.includes('Premium'))
        ) || voices.find(voice => voice.lang.includes('en'));

        if (preferredVoice) {
          utterance.voice = preferredVoice;
        }

        skillhubSynth.speak(utterance);
      }

      async function skillhubStartRecording() {
        if (skillhubIsProcessing) return;

        try {
          const stream = await navigator.mediaDevices.getUserMedia({
            audio: {
              echoCancellation: true,
              noiseSuppression: true,
              sampleRate: 44100
            }
          });

          skillhubMediaRecorder = new MediaRecorder(stream, {
            mimeType: 'audio/webm;codecs=opus'
          });

          skillhubAudioChunks = [];

          skillhubMediaRecorder.ondataavailable = (event) => {
            if (event.data.size > 0) {
              skillhubAudioChunks.push(event.data);
            }
          };

          skillhubMediaRecorder.onstop = async () => {
            const audioBlob = new Blob(skillhubAudioChunks, { type: 'audio/webm' });
            await skillhubProcessVoiceInput(audioBlob);
            stream.getTracks().forEach(track => track.stop());
          };

          skillhubMediaRecorder.start();
          skillhubIsRecording = true;

          document.getElementById('skillhub-record-btn').style.display = 'none';
          document.getElementById('skillhub-stop-btn').style.display = 'flex';
          document.getElementById('skillhub-record-btn').classList.add('recording');
          document.getElementById('skillhub-audio-visualizer').classList.add('active');

          skillhubShowVoiceStatus('üé§ Recording... Click stop when done');

        } catch (error) {
          console.error('Error starting recording:', error);
        }
      }

      function skillhubStopRecording() {
        if (skillhubMediaRecorder && skillhubIsRecording) {
          skillhubMediaRecorder.stop();
          skillhubIsRecording = false;

          document.getElementById('skillhub-record-btn').style.display = 'flex';
          document.getElementById('skillhub-stop-btn').style.display = 'none';
          document.getElementById('skillhub-record-btn').classList.remove('recording');
          document.getElementById('skillhub-audio-visualizer').classList.remove('active');

          skillhubShowVoiceStatus('üîÑ Processing audio...');
        }
      }

      async function skillhubProcessVoiceInput(audioBlob) {
        if (skillhubIsProcessing) return;
        skillhubIsProcessing = true;

        try {
          const arrayBuffer = await audioBlob.arrayBuffer();
          const base64Audio = btoa(String.fromCharCode(...new Uint8Array(arrayBuffer)));

          skillhubShowTypingIndicator();
          skillhubShowVoiceStatus('ü§ñ Transcribing and processing...');

          const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=AIzaSyCsNiZthfSE-0R-kyqeoonXqEzEiJyu4cg`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              contents: [{
                parts: [
                  {
                    text: "Please transcribe this audio and then provide a helpful response about SkillHub platform features or technical support. Focus only on platform information, not business strategies."
                  },
                  {
                    inline_data: {
                      mime_type: "audio/webm",
                      data: base64Audio
                    }
                  }
                ]
              }],
              generationConfig: {
                temperature: 0.7,
                topK: 40,
                topP: 0.95,
                maxOutputTokens: 2048,
              }
            })
          });

          if (!response.ok) {
            throw new Error(`API request failed: ${response.status}`);
          }

          const data = await response.json();
          const botResponse = data.candidates[0].content.parts[0].text;

          const lines = botResponse.split('\n');
          const transcription = lines.find(line => line.includes('transcription') || line.includes('said') || line.includes('asked')) || 'Voice message received';

          skillhubHideTypingIndicator();
          skillhubHideVoiceStatus();

          skillhubAddMessage(transcription.replace(/.*?[:]\s*/, ''), true, true);

          setTimeout(() => {
            skillhubAddMessage(botResponse);
            skillhubSpeakResponse(botResponse);
          }, 500);

        } catch (error) {
          console.error('Error processing voice:', error);
          skillhubHideTypingIndicator();
          skillhubHideVoiceStatus();
        } finally {
          skillhubIsProcessing = false;
        }
      }

      async function skillhubSendMessage() {
        const messageInput = document.getElementById('skillhub-message-input');
        const sendButton = document.getElementById('skillhub-send-btn');
        const message = messageInput.value.trim();

        if (!message || skillhubIsProcessing) return;

        skillhubIsProcessing = true;

        skillhubAddMessage(message, true);
        messageInput.value = '';

        messageInput.disabled = true;
        sendButton.disabled = true;

        skillhubShowTypingIndicator();

        try {
          const botResponse = await skillhubGetBotResponse(message, false);

          skillhubHideTypingIndicator();
          skillhubAddMessage(botResponse);

          if (document.getElementById('skillhub-play-btn').style.display === 'flex') {
            setTimeout(() => skillhubSpeakResponse(botResponse), 300);
          }

        } catch (error) {
          skillhubHideTypingIndicator();
          skillhubAddMessage("I apologize, but I'm having trouble processing your request right now. Please try again in a moment.");
          console.error('Send message error:', error);
        } finally {
          messageInput.disabled = false;
          sendButton.disabled = false;
          messageInput.focus();
          skillhubIsProcessing = false;
        }
      }

      function skillhubTogglePlayback() {
        if (skillhubSynth.speaking) {
          skillhubSynth.cancel();
        } else if (skillhubLastBotResponse) {
          skillhubSpeakResponse(skillhubLastBotResponse);
        }
      }

      function skillhubHandleKeyPress(event) {
        if (event.key === 'Enter' && !skillhubIsProcessing) {
          skillhubSendMessage();
        }
      }

      // Event Listeners
      document.getElementById('skillhub-chat-icon').addEventListener('click', skillhubToggleChat);
      document.getElementById('skillhub-close-btn').addEventListener('click', skillhubToggleChat);
      document.getElementById('skillhub-record-btn').addEventListener('click', skillhubStartRecording);
      document.getElementById('skillhub-stop-btn').addEventListener('click', skillhubStopRecording);
      document.getElementById('skillhub-play-btn').addEventListener('click', skillhubTogglePlayback);
      document.getElementById('skillhub-send-btn').addEventListener('click', skillhubSendMessage);
      document.getElementById('skillhub-message-input').addEventListener('keypress', skillhubHandleKeyPress);

      // Initialize voices
      if (skillhubSynth.onvoiceschanged !== undefined) {
        skillhubSynth.onvoiceschanged = () => {
          const voices = skillhubSynth.getVoices();
          console.log('SkillHub Chatbot: Available voices loaded');
        };
      }

      // Auto-focus input when chat opens
      document.getElementById('skillhub-message-input').addEventListener('focus', function () {
        setTimeout(() => {
          document.getElementById('skillhub-chat-messages').scrollTop = document.getElementById('skillhub-chat-messages').scrollHeight;
        }, 100);
      });

      // Keyboard shortcuts
      document.addEventListener('keydown', function (e) {
        // Only work when chatbot is active
        if (!skillhubChatOpen) return;

        // Space to start/stop recording (when not typing)
        if (e.code === 'Space' && e.target !== document.getElementById('skillhub-message-input')) {
          e.preventDefault();
          if (skillhubIsRecording) {
            skillhubStopRecording();
          } else {
            skillhubStartRecording();
          }
        }

        // Escape to stop recording or close chat
        if (e.key === 'Escape') {
          if (skillhubIsRecording) {
            skillhubStopRecording();
          } else {
            skillhubToggleChat();
          }
        }
      });

      // Handle page visibility changes
      document.addEventListener('visibilitychange', function () {
        if (document.hidden && skillhubIsRecording) {
          skillhubStopRecording();
        }
      });

      // Connection monitoring
      window.addEventListener('online', function () {
        if (skillhubChatOpen) {
          skillhubAddMessage("‚úÖ Connection restored. Voice and text features are available.", false);
        }
      });

      window.addEventListener('offline', function () {
        if (skillhubChatOpen) {
          skillhubAddMessage("‚ö†Ô∏è Connection lost. Voice features may be limited until connection is restored.", false);
        }
      });

      console.log('SkillHub Chatbot initialized successfully');
    });
  </script>

    <script>
      // Sample teacher data
      const teachersData = {
        Guitar: [
          {
            id: 1,
            name: "Maria Rodriguez",
            avatar: "M",
            rating: 4.9,
            reviews: 47,
            distance: "0.8 miles away",
            description:
              "Passionate language teacher with 10+ years experience. I specialize in making Spanish fun and accessible for all ages through immersive cultural experiences.",
            skills: ["Guitar", "Flamenco Dance", "Music Theory"],
            price: "Rs.1000/hour",
            availability: "Available today",
          },
          {
            id: 2,
            name: "David Johnson",
            avatar: "D",
            rating: 4.9,
            reviews: 47,
            distance: "0.8 miles away",
            description:
              "Professional guitarist with experience in rock, jazz, and classical music. Teaching beginners to advanced students for over 8 years.",
            skills: ["Guitar", "Bass Guitar", "Music Production"],
            price: "Rs.1200/hour",
            availability: "Available today",
          },
        ],
        Piano: [
          {
            id: 3,
            name: "Sarah Chen",
            avatar: "S",
            rating: 4.8,
            reviews: 32,
            distance: "1.2 miles away",
            description:
              "Classical pianist with conservatory training. Specializes in teaching proper technique and music theory for all skill levels.",
            skills: ["Piano", "Music Theory", "Composition"],
            price: "Rs.1500/hour",
            availability: "Available tomorrow",
          },
          {
            id: 4,
            name: "Michael Brown",
            avatar: "M",
            rating: 4.7,
            reviews: 28,
            distance: "0.5 miles away",
            description:
              "Jazz pianist and composer with 15+ years teaching experience. Focus on improvisation and contemporary styles.",
            skills: ["Piano", "Jazz Theory", "Improvisation"],
            price: "Rs.1300/hour",
            availability: "Available today",
          },
        ],
        Painting: [
          {
            id: 5,
            name: "Elena Vasquez",
            avatar: "E",
            rating: 4.9,
            reviews: 53,
            distance: "0.3 miles away",
            description:
              "Professional artist with gallery exhibitions worldwide. Teaching watercolor, oil, and acrylic painting techniques.",
            skills: ["Watercolor", "Oil Painting", "Acrylic", "Color Theory"],
            price: "Rs.1400/hour",
            availability: "Available today",
          },
        ],
        Cooking: [
          {
            id: 6,
            name: "Chef Antonio",
            avatar: "A",
            rating: 5.0,
            reviews: 42,
            distance: "1.0 miles away",
            description:
              "Professional chef with 20+ years experience in Italian cuisine. Teaching authentic recipes and techniques.",
            skills: ["Italian Cuisine", "Pasta Making", "Wine Pairing"],
            price: "Rs.1800/hour",
            availability: "Available tomorrow",
          },
        ],
      };

      // Global variables
      let currentSkill = "";
      let selectedTeacher = null;

      // Wishlist functionality
      function getWishlist() {
        const wishlist = localStorage.getItem("skillWishlist");
        return wishlist ? JSON.parse(wishlist) : [];
      }

      function saveWishlist(wishlist) {
        localStorage.setItem("skillWishlist", JSON.stringify(wishlist));
      }

      function isInWishlist(skill) {
        const wishlist = getWishlist();
        return wishlist.some((item) => item.skillName === skill);
      }

      function addToWishlist() {
        if (!currentSkill) return;

        const wishlist = getWishlist();

        // Check if already in wishlist
        if (isInWishlist(currentSkill)) {
          showSuccessMessage(`${currentSkill} is already in your wishlist!`);
          return;
        }

        // Add to wishlist
        const wishlistItem = {
          skillName: currentSkill,
          courseIcon: getSkillIcon(currentSkill),
          availableTeachers: getAvailableTeachers(currentSkill),
          addedDate: new Date().toISOString(),
        };

        wishlist.push(wishlistItem);
        saveWishlist(wishlist);

        // Update button state
        updateWishlistButton(true);

        showSuccessMessage(
          `${currentSkill} added to your wishlist! Check it in your Dashboard > My Learning.`
        );
      }

      function updateWishlistButton(isAdded) {
        const btn = document.getElementById("wishlist-btn");
        const btnText = document.getElementById("wishlist-btn-text");

        if (isAdded) {
          btn.classList.add("added");
          btnText.textContent = "Added to Wishlist";
          btn.onclick = null; // Disable further clicks
        } else {
          btn.classList.remove("added");
          btnText.textContent = "Add to Wishlist";
          btn.onclick = addToWishlist;
        }
      }

      function getSkillIcon(skill) {
        const iconMap = {
          Guitar: "üé∏",
          Piano: "üéπ",
          Painting: "üé®",
          Cooking: "üç≥",
          "Traditional Cuisines": "üç≥",
          Photography: "üì∏",
          Drawing: "‚úèÔ∏è",
          Pottery: "üè∫",
          Singing: "üé§",
          Violin: "üéª",
          Drums: "ü•Å",
          "Public Speaking": "üé§",
          "Computer Basics": "üíª",
          "Social Media": "üì±",
          Gardening: "üå±",
          "Yoga Meditation": "üßò",
          Fitness: "üí™",
          "Resume Writing": "üìù",
          Leadership: "üë®‚Äçüíº",
        };
        return iconMap[skill] || "üìö";
      }

      function getAvailableTeachers(skill) {
        const teachers = teachersData[skill] || [];
        return teachers.length;
      }

      // Wait for DOM to be fully loaded
      document.addEventListener("DOMContentLoaded", function () {
        initializeApp();
      });

      function initializeApp() {
        setupSearchFunctionality();
        setupSkillNavigation();
        setupCategoryInteractions();
        setupScrollEffects();
        setupKeyboardNavigation();
        setupResponsiveHandlers();

        // Check if we need to auto-navigate to a specific skill from dashboard
        checkForExploreSkill();

        console.log("üéì SkillHub - Discover Skills Near You! üöÄ");
        console.log("‚úÖ All features initialized successfully!");
      }

      // Check if we should auto-navigate to a specific skill
      function checkForExploreSkill() {
        const exploreSkill = localStorage.getItem("exploreSkill");
        if (exploreSkill) {
          // Clear the stored skill
          localStorage.removeItem("exploreSkill");

          // Show a notification that we're exploring the specific skill
          showSuccessMessage(
            `Exploring ${exploreSkill} teachers from your wishlist!`
          );

          // Auto-navigate to the skill after a short delay to ensure page is fully loaded
          setTimeout(() => {
            navigateToTeachers(exploreSkill);
          }, 800);
        }
      }

      // Search functionality
      function setupSearchFunctionality() {
        const searchInput = document.querySelector(".search-input");
        const searchBtn = document.querySelector(".search-btn");

        function performSearch() {
          const query = searchInput.value.trim();
          if (query) {
            console.log("Searching for:", query);

            // Check if we're on the skills page
            if (
              document.getElementById("skill-categories-view").style.display !==
              "none"
            ) {
              filterCategories(query);
            } else {
              filterTeachers(query);
            }
          }
        }

        if (searchBtn) {
          searchBtn.addEventListener("click", performSearch);
        }

        if (searchInput) {
          searchInput.addEventListener("keypress", function (e) {
            if (e.key === "Enter") {
              performSearch();
            }
          });
        }
      }

      // Skill navigation setup
      function setupSkillNavigation() {
        const skillItems = document.querySelectorAll(
          ".category-skills li[data-skill]"
        );

        skillItems.forEach((item) => {
          item.addEventListener("click", function (e) {
            e.stopPropagation();
            const skill = this.getAttribute("data-skill");
            navigateToTeachers(skill);
          });

          // Make items focusable for keyboard navigation
          item.setAttribute("tabindex", "0");

          item.addEventListener("keypress", function (e) {
            if (e.key === "Enter" || e.key === " ") {
              e.preventDefault();
              const skill = this.getAttribute("data-skill");
              navigateToTeachers(skill);
            }
          });
        });
      }

      // Navigate to teachers view
      function navigateToTeachers(skill) {
        currentSkill = skill;
        console.log("Selected skill:", skill);

        // Hide skill categories view
        document.getElementById("skill-categories-view").style.display = "none";

        // Show teachers view
        document.getElementById("teachers-view").style.display = "block";

        // Update the subtitle
        const subtitle = document.getElementById("skill-subtitle");
        subtitle.textContent = `Find expert ${skill} teachers in your neighborhood`;

        // Update wishlist section
        document.getElementById("current-skill-name").textContent = skill;
        updateWishlistButton(isInWishlist(skill));

        // Load teachers for this skill
        loadTeachers(skill);

        // Scroll to top
        window.scrollTo(0, 0);
      }

      // Show skill categories (back navigation)
      function showSkillCategories() {
        document.getElementById("teachers-view").style.display = "none";
        document.getElementById("skill-categories-view").style.display =
          "block";
        currentSkill = "";
        window.scrollTo(0, 0);
      }

      // Load teachers for a specific skill
      function loadTeachers(skill) {
        const teachersGrid = document.getElementById("teachers-grid");
        const teacherCount = document.getElementById("teacher-count");

        // Get teachers for this skill, fallback to Guitar teachers as sample
        let teachers = teachersData[skill] || [];

        // If no exact match, try to find similar skills or use sample data
        if (teachers.length === 0) {
          // Try to find teachers for similar skills
          for (const [key, value] of Object.entries(teachersData)) {
            if (
              key.toLowerCase().includes(skill.toLowerCase()) ||
              skill.toLowerCase().includes(key.toLowerCase())
            ) {
              teachers = value;
              break;
            }
          }

          // If still no match, create sample teacher data for the skill
          if (teachers.length === 0) {
            teachers = createSampleTeachersForSkill(skill);
          }
        }

        // Update teacher count
        teacherCount.textContent = `${teachers.length} teachers found`;

        // Clear existing content
        teachersGrid.innerHTML = "";

        if (teachers.length === 0) {
          teachersGrid.innerHTML = `
            <div class="no-teachers">
              <p>No teachers found for ${skill}. Try searching for other skills!</p>
            </div>
          `;
          return;
        }

        // Create teacher cards
        teachers.forEach((teacher) => {
          const teacherCard = createTeacherCard(teacher);
          teachersGrid.appendChild(teacherCard);
        });
      }

      // Create sample teachers for skills that don't have specific data
      function createSampleTeachersForSkill(skill) {
        const sampleTeachers = [
          {
            id: Date.now() + 1,
            name: `Expert ${skill} Instructor`,
            avatar: skill.charAt(0).toUpperCase(),
            rating: 4.8,
            reviews: Math.floor(Math.random() * 50) + 20,
            distance: `${(Math.random() * 2 + 0.3).toFixed(1)} miles away`,
            description: `Professional ${skill} teacher with years of experience. Specializing in teaching ${skill} to students of all levels.`,
            skills: [skill, "Teaching", "Mentoring"],
            price: `Rs.${Math.floor(Math.random() * 1000) + 800}/hour`,
            availability: "Available today",
          },
          {
            id: Date.now() + 2,
            name: `${skill} Master`,
            avatar: skill.charAt(1)?.toUpperCase() || "T",
            rating: 4.9,
            reviews: Math.floor(Math.random() * 40) + 15,
            distance: `${(Math.random() * 1.5 + 0.5).toFixed(1)} miles away`,
            description: `Passionate ${skill} expert dedicated to helping students master ${skill} through personalized instruction.`,
            skills: [skill, "Advanced Techniques", "Beginner Friendly"],
            price: `Rs.${Math.floor(Math.random() * 800) + 1000}/hour`,
            availability: "Available tomorrow",
          },
        ];

        return sampleTeachers;
      }

      // Create a teacher card element
      function createTeacherCard(teacher) {
        const card = document.createElement("div");
        card.className = "teacher-card";

        const stars =
          "‚òÖ".repeat(Math.floor(teacher.rating)) +
          "‚òÜ".repeat(5 - Math.floor(teacher.rating));

        card.innerHTML = `
          <div class="teacher-header">
            <div class="teacher-avatar">
              <span>${teacher.avatar}</span>
            </div>
            <div class="teacher-info">
              <h3>${teacher.name}</h3>
              <div class="teacher-rating">
                <span class="stars">${stars}</span>
                <span class="rating-text">${teacher.rating} (${
          teacher.reviews
        } reviews)</span>
              </div>
              <div class="teacher-distance">${teacher.distance}</div>
            </div>
          </div>
          
          <div class="teacher-description">
            <p>${teacher.description}</p>
          </div>
          
          <div class="skills-offered">
            <h4>Skills Offered:</h4>
            <div class="skills-tags">
              ${teacher.skills
                .map((skill) => `<span class="skill-tag">${skill}</span>`)
                .join("")}
            </div>
          </div>
          
          <div class="teacher-footer">
            <div class="price-info">
              <span class="price">${teacher.price}</span>
              <span class="availability available">‚óè ${
                teacher.availability
              }</span>
            </div>
            <button class="view-btn" onclick="openTeacherPopup(${
              teacher.id
            })">View</button>
          </div>
        `;

        return card;
      }

      // Open teacher detail popup
      function openTeacherPopup(teacherId) {
        // Find teacher in current skill data
        const teachers =
          teachersData[currentSkill] || teachersData["Guitar"] || [];
        const teacher = teachers.find((t) => t.id === teacherId);

        if (!teacher) return;

        selectedTeacher = teacher;

        // Populate popup with teacher data
        document.getElementById("popup-avatar").textContent = teacher.avatar;
        document.getElementById("popup-name").textContent = teacher.name;

        const stars =
          "‚òÖ".repeat(Math.floor(teacher.rating)) +
          "‚òÜ".repeat(5 - Math.floor(teacher.rating));
        document.getElementById(
          "popup-rating"
        ).innerHTML = `<span class="stars">${stars}</span> ${teacher.rating}`;
        document.getElementById(
          "popup-reviews"
        ).textContent = `(${teacher.reviews} reviews)`;
        document.getElementById("popup-distance").textContent =
          teacher.distance;
        document.getElementById("popup-description").textContent =
          teacher.description;
        document.getElementById("popup-price").textContent = teacher.price;
        document.getElementById(
          "popup-availability"
        ).innerHTML = `‚óè ${teacher.availability}`;

        // Populate skills
        const skillsContainer = document.getElementById("popup-skills");
        skillsContainer.innerHTML = teacher.skills
          .map((skill) => `<span class="skill-tag">${skill}</span>`)
          .join("");

        // Show popup
        document.getElementById("teacher-popup").style.display = "flex";
        document.body.style.overflow = "hidden";
      }

      // Close teacher popup
      function closeTeacherPopup() {
        document.getElementById("teacher-popup").style.display = "none";
        document.body.style.overflow = "auto";
        selectedTeacher = null;
      }

      // Connect with teacher
      function connectWithTeacher() {
        if (!selectedTeacher) return;

        // Update modal with teacher name
        document.getElementById("connect-teacher-name").textContent =
          selectedTeacher.name;

        // Show confirmation modal
        document.getElementById("connect-modal").style.display = "flex";
      }

      // Close connect modal
      function closeConnectModal() {
        document.getElementById("connect-modal").style.display = "none";
      }

      // Confirm connection
      function confirmConnection() {
        if (!selectedTeacher) return;

        // Close modals
        closeConnectModal();
        closeTeacherPopup();

        // Show success message
        showSuccessMessage(
          `Successfully connected with ${selectedTeacher.name}! They will contact you soon.`
        );

        console.log(`Connected with teacher: ${selectedTeacher.name}`);
      }

      // Show success message
      function showSuccessMessage(message) {
        // Remove existing success message if any
        const existing = document.querySelector(".success-message");
        if (existing) {
          existing.remove();
        }

        // Create new success message
        const successDiv = document.createElement("div");
        successDiv.className = "success-message";
        successDiv.textContent = message;

        document.body.appendChild(successDiv);

        // Show with animation
        setTimeout(() => {
          successDiv.classList.add("show");
        }, 100);

        // Hide after 4 seconds
        setTimeout(() => {
          successDiv.classList.remove("show");
          setTimeout(() => {
            successDiv.remove();
          }, 300);
        }, 4000);
      }

      // Category interactions
      function setupCategoryInteractions() {
        const categoryCards = document.querySelectorAll(".category-section");

        categoryCards.forEach((card) => {
          // Add hover effect
          card.addEventListener("mouseenter", function () {
            this.style.transform = "translateY(-8px)";
            this.style.cursor = "pointer";
          });

          card.addEventListener("mouseleave", function () {
            this.style.transform = "translateY(-5px)";
          });
        });
      }

      // Filter categories based on search query
      function filterCategories(query) {
        const categories = document.querySelectorAll(".category-section");
        query = query.toLowerCase();

        categories.forEach((category) => {
          const categoryName = category
            .querySelector("h3")
            .textContent.toLowerCase();
          const categorySkills = Array.from(
            category.querySelectorAll(".category-skills li")
          )
            .map((li) => li.textContent.toLowerCase())
            .join(" ");

          if (categoryName.includes(query) || categorySkills.includes(query)) {
            category.style.display = "block";
            category.style.animation = "fadeIn 0.5s ease-out";
          } else {
            category.style.display = "none";
          }
        });
      }

      // Filter teachers based on search query
      function filterTeachers(query) {
        const teacherCards = document.querySelectorAll(".teacher-card");
        query = query.toLowerCase();

        teacherCards.forEach((card) => {
          const teacherName = card
            .querySelector("h3")
            .textContent.toLowerCase();
          const teacherSkills = Array.from(card.querySelectorAll(".skill-tag"))
            .map((tag) => tag.textContent.toLowerCase())
            .join(" ");
          const teacherDescription = card
            .querySelector(".teacher-description p")
            .textContent.toLowerCase();

          if (
            teacherName.includes(query) ||
            teacherSkills.includes(query) ||
            teacherDescription.includes(query)
          ) {
            card.style.display = "block";
          } else {
            card.style.display = "none";
          }
        });
      }

      // Setup scroll effects
      function setupScrollEffects() {
        // Smooth scrolling for navigation links
        const navLinks = document.querySelectorAll(".nav-link");
        navLinks.forEach((link) => {
          link.addEventListener("click", function (e) {
            if (
              this.getAttribute("href") &&
              this.getAttribute("href").startsWith("#")
            ) {
              e.preventDefault();
              const targetId = this.getAttribute("href");
              const targetSection = document.querySelector(targetId);
              if (targetSection) {
                targetSection.scrollIntoView({
                  behavior: "smooth",
                });
              }
            }
          });
        });

        // Add scroll effect to navbar
        window.addEventListener("scroll", function () {
          const navbar = document.querySelector(".navbar");
          if (navbar) {
            if (window.scrollY > 100) {
              navbar.style.background = "rgba(255, 255, 255, 0.98)";
              navbar.style.boxShadow = "0 2px 30px rgba(0, 0, 0, 0.15)";
            } else {
              navbar.style.background = "rgba(255, 255, 255, 0.95)";
              navbar.style.boxShadow = "0 2px 20px rgba(0, 0, 0, 0.1)";
            }
          }
        });

        // Animate category cards on scroll
        const cardObserver = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                entry.target.style.opacity = "1";
                entry.target.style.transform = "translateY(0)";
              }
            });
          },
          {
            threshold: 0.1,
          }
        );

        // Observe category cards
        const categoryCards = document.querySelectorAll(".category-section");
        categoryCards.forEach((card, index) => {
          card.style.opacity = "0";
          card.style.transform = "translateY(30px)";
          card.style.transition = `opacity 0.6s ease ${
            index * 0.1
          }s, transform 0.6s ease ${index * 0.1}s`;
          cardObserver.observe(card);
        });

        // Parallax effect for hero circles
        window.addEventListener("scroll", function () {
          const scrolled = window.pageYOffset;
          const heroCircles = document.querySelectorAll(".hero-circle");

          heroCircles.forEach((circle, index) => {
            const speed = 0.02 + index * 0.01;
            const yPos = scrolled * speed;
            circle.style.transform = `translateY(${yPos}px)`;
          });
        });
      }

      // Setup keyboard navigation
      function setupKeyboardNavigation() {
        // Add keyboard navigation support
        document.addEventListener("keydown", function (e) {
          if (e.key === "Tab") {
            document.body.classList.add("keyboard-navigation");
          }

          // Escape key to close popups
          if (e.key === "Escape") {
            if (
              document.getElementById("teacher-popup").style.display === "flex"
            ) {
              closeTeacherPopup();
            }
            if (
              document.getElementById("connect-modal").style.display === "flex"
            ) {
              closeConnectModal();
            }
          }
        });

        document.addEventListener("mousedown", function () {
          document.body.classList.remove("keyboard-navigation");
        });
      }

      // Setup responsive handlers
      function setupResponsiveHandlers() {
        // Handle window resize for responsive adjustments
        let resizeTimer;
        window.addEventListener("resize", function () {
          clearTimeout(resizeTimer);
          resizeTimer = setTimeout(function () {
            console.log("Window resized, adjusting layouts...");
            // Add any responsive adjustments here
          }, 250);
        });
      }

      // Sort teachers functionality
      function setupSortFunctionality() {
        const sortSelect = document.getElementById("sort-select");
        if (sortSelect) {
          sortSelect.addEventListener("change", function () {
            const sortBy = this.value;
            sortTeachers(sortBy);
          });
        }
      }

      function sortTeachers(sortBy) {
        const teachersGrid = document.getElementById("teachers-grid");
        const cards = Array.from(
          teachersGrid.querySelectorAll(".teacher-card")
        );

        cards.sort((a, b) => {
          switch (sortBy) {
            case "rating":
              const ratingA = parseFloat(
                a.querySelector(".rating-text").textContent
              );
              const ratingB = parseFloat(
                b.querySelector(".rating-text").textContent
              );
              return ratingB - ratingA;

            case "price":
              const priceA = parseInt(
                a.querySelector(".price").textContent.replace(/[^\d]/g, "")
              );
              const priceB = parseInt(
                b.querySelector(".price").textContent.replace(/[^\d]/g, "")
              );
              return priceA - priceB;

            case "distance":
              const distA = parseFloat(
                a.querySelector(".teacher-distance").textContent
              );
              const distB = parseFloat(
                b.querySelector(".teacher-distance").textContent
              );
              return distA - distB;

            default:
              return 0;
          }
        });

        // Re-append sorted cards
        cards.forEach((card) => teachersGrid.appendChild(card));
      }

      // Initialize sort functionality when teachers view is shown
      document.addEventListener("DOMContentLoaded", function () {
        setupSortFunctionality();
      });

      // Handle popup clicks outside content
      document.addEventListener("click", function (e) {
        if (e.target.classList.contains("popup-overlay")) {
          closeTeacherPopup();
        }
        if (e.target.classList.contains("modal-overlay")) {
          closeConnectModal();
        }
      });
    </script>
    <script src="js/footer2.js"></script>
  </body>
</html>