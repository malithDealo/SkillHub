<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Community - SkillHub</title>
  <link rel="stylesheet" href="css/community.css" />
  <link rel="stylesheet" href="components/footer1.css" />
  <style>
    /* Updated Navbar Styles - Consistent with Dashboard and Find Teachers */
    .navbar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: #ffffff;
      border-bottom: 1px solid #e9ecef;
      padding: 0 2rem;
      height: 80px;
      z-index: 1000;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    }

    .nav-container {
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 100%;
      max-width: 1200px;
      margin: 0 auto;
    }

    .nav-brand {
      display: flex;
      align-items: center;
      gap: 12px;
      font-weight: bold;
      color: #333;
    }

    .logo {
      font-size: 1.5rem;
    }

    .brand-text {
      font-size: 1.3rem;
      color: #4caf50;
    }

    .nav-menu {
      display: flex;
      gap: 2rem;
    }

    .nav-link {
      text-decoration: none;
      color: #666;
      font-weight: 500;
      padding: 8px 16px;
      border-radius: 6px;
      transition: all 0.3s ease;
    }

    .nav-link:hover {
      color: #4caf50;
      background: #f0f8f0;
    }

    .nav-link.active {
      color: #4caf50;
      background: #e8f5e8;
      font-weight: 600;
    }

    .nav-profile {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .nav-user {
      font-weight: 500;
      color: #333;
    }

    .profile-avatar {
      width: 40px;
      height: 40px;
      background: #4caf50;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.2rem;
    }

    /* Update hero section to account for new navbar height */
    .hero {
      padding-top: 120px;
      /* Increased to account for navbar */
    }

    /* Responsive navbar */
    @media (max-width: 768px) {
      .nav-menu {
        display: none;
      }

      .navbar {
        padding: 0 1rem;
      }

      .nav-container {
        gap: 1rem;
      }

      .nav-profile {
        gap: 8px;
      }

      .nav-user {
        font-size: 0.9rem;
      }

      .profile-avatar {
        width: 35px;
        height: 35px;
        font-size: 1rem;
      }
    }

    @media (max-width: 480px) {
      .nav-brand .brand-text {
        font-size: 1.1rem;
      }

      .logo {
        font-size: 1.3rem;
      }
    }
  </style>
</head>

<body>
  <!-- Updated Navigation Bar - Consistent with Dashboard and Find Teachers -->
  <nav class="navbar">
    <div class="nav-container">
      <div class="nav-brand">
        <img src="images/SkillHub LOGO 3.png" alt="SkillHub Logo" class="logo" />
        <span class="brand-text">SkillHub</span>
      </div>

      <div class="nav-menu">
        <a href="dashboard.html" class="nav-link">Dashboard</a>
        <a href="services.html" class="nav-link">Find Teachers</a>
        <a href="dashboard.html#my-learning" class="nav-link">My Learning</a>
        <a href="community.html" class="nav-link active">Community</a>
      </div>

      <div class="nav-profile">
        <span class="nav-user">Jane Student</span>
        <div class="profile-avatar">
          <span>üë§</span>
        </div>
      </div>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-background-circles">
      <div class="hero-circle circle-1"></div>
      <div class="hero-circle circle-2"></div>
      <div class="hero-circle circle-3"></div>
      <div class="hero-circle circle-4"></div>
      <div class="hero-circle circle-5"></div>
      <div class="hero-circle circle-6"></div>
      <div class="hero-circle circle-7"></div>
      <div class="hero-circle circle-8"></div>
    </div>
    <div class="container">
      <div class="hero-content">
        <h1>Your Learning Community</h1>
        <p>Connect with neighbors, share knowledge, and grow together</p>
      </div>
    </div>
  </section>

  <!-- Community Stats -->
  <section class="community-stats-section">
    <div class="container">
      <div class="stats-card">
        <div class="stats-grid">
          <div class="stat-item">
            <div class="stat-number" data-target="1234">0</div>
            <div class="stat-label">Active Learners</div>
          </div>
          <div class="stat-item">
            <div class="stat-number" data-target="567">0</div>
            <div class="stat-label">Expert Teachers</div>
          </div>
          <div class="stat-item">
            <div class="stat-number" data-target="472">0</div>
            <div class="stat-label">Skills Shared</div>
          </div>
          <div class="stat-item">
            <div class="stat-number" data-target="30">0</div>
            <div class="stat-label">Events This Month</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Upcoming Events Section -->
  <section class="events-section">
    <div class="container">
      <div class="section-header">
        <h2>Upcoming Community Events</h2>
        <p>Join local workshops, meetups, and skill-sharing gatherings</p>
      </div>

      <div class="events-grid">
        <div class="event-card">
          <div class="event-date">
            <span class="date-badge">June 15, 2025</span>
          </div>
          <div class="event-content">
            <h3>Community Cooking Workshop</h3>
            <p>
              Learn traditional Sri Lankan recipes from local grandmothers. A
              hands-on experience with authentic spices and techniques.
            </p>
            <div class="event-meta">
              <span class="event-location">üìç Community Hall</span>
              <span class="event-attendees">üë• 15 participants</span>
            </div>
          </div>
        </div>

        <div class="event-card">
          <div class="event-date">
            <span class="date-badge">June 22, 2025</span>
          </div>
          <div class="event-content">
            <h3>Photography Walk</h3>
            <p>
              Explore our beautiful locations while learning photography
              techniques from professional photographers.
            </p>
            <div class="event-meta">
              <span class="event-location">üìç Viharamahadevi Park</span>
              <span class="event-attendees">üë• 8 participants</span>
            </div>
          </div>
        </div>

        <div class="event-card">
          <div class="event-date">
            <span class="date-badge">June 18, 2025</span>
          </div>
          <div class="event-content">
            <h3>Tech Skills Meetup</h3>
            <p>
              Monthly gathering for tech enthusiasts to share knowledge,
              network, and learn new programming skills together.
            </p>
            <div class="event-meta">
              <span class="event-location">üìç Library Center</span>
              <span class="event-attendees">üë• 12 participants</span>
            </div>
          </div>
        </div>

        <div class="event-card">
          <div class="event-date">
            <span class="date-badge">June 27, 2025</span>
          </div>
          <div class="event-content">
            <h3>Mindfulness & Meditation</h3>
            <p>
              Weekly meditation session in peaceful surroundings. Perfect for
              beginners and experienced practitioners alike.
            </p>
            <div class="event-meta">
              <span class="event-location">üìç Wellness Studio</span>
              <span class="event-attendees">üë• 20 participants</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Clubs Section -->
  <section class="clubs-section">
    <div class="container">
      <div class="section-header">
        <h2>Clubs</h2>
        <p>
          Share knowledge, ask questions, and connect with fellow learners
        </p>
      </div>

      <div class="clubs-grid">
        <div class="club-card" data-club="science">
          <h3>Science club</h3>
          <p>
            Learn and gain insights of Science in the new world and connect
            with fellow individuals
          </p>
        </div>

        <div class="club-card" data-club="maths">
          <h3>Maths club</h3>
          <p>
            Learn and gain insights of Maths in the new world and connect with
            fellow individuals
          </p>
        </div>

        <div class="club-card" data-club="commerce">
          <h3>Commerce club</h3>
          <p>
            Learn and gain insights of commerce in the new world and connect
            with fellow individuals
          </p>
        </div>

        <div class="club-card" data-club="art">
          <h3>Art club</h3>
          <p>
            Learn and gain insights of art in the new world and connect with
            fellow individuals
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="cta">
    <div class="container">
      <h2>SkillHub</h2>
      <p>Connect ‚óè Learn ‚óè Grow ‚óè Share</p>
    </div>
  </section>

  <!-- Club Detail Page -->
  <div class="club-detail-page" id="clubDetailPage">
    <div class="club-header">
      <div class="container">
        <div class="club-header-content">
          <div>
            <h1 id="clubDetailTitle">Science Club</h1>
            <p id="clubDetailDescription">
              Learn and gain insights of Science in the new world and connect
              with fellow individuals
            </p>
          </div>
          <button class="close-club-btn" id="closeClubBtn">‚úï</button>
        </div>
      </div>
    </div>

    <div class="club-content">
      <div class="container">
        <!-- Club Stats -->
        <div class="club-stats">
          <h3 style="margin-bottom: 2rem; text-align: center; color: #333">
            Club Statistics
          </h3>
          <div class="club-stats-grid">
            <div class="club-stat-item">
              <div class="club-stat-number" id="clubMemberCount">156</div>
              <div class="club-stat-label">Members</div>
            </div>
            <div class="club-stat-item">
              <div class="club-stat-number" id="clubEventCount">12</div>
              <div class="club-stat-label">Events</div>
            </div>
            <div class="club-stat-item">
              <div class="club-stat-number" id="clubDiscussionCount">89</div>
              <div class="club-stat-label">Discussions</div>
            </div>
          </div>
        </div>

        <!-- Club Membership Section -->
        <div class="club-membership-section">
          <h3 style="margin-bottom: 2rem; text-align: center; color: #333">
            Club Membership
          </h3>
          <div class="membership-container">
            <div class="membership-info">
              <div class="membership-icon">üéØ</div>
              <div class="membership-text">
                <h4 id="membershipTitle">Ready to Join?</h4>
                <p id="membershipDescription">
                  Join this amazing community and connect with like-minded
                  learners!
                </p>
              </div>
            </div>
            <button class="btn btn-primary join-club-btn" id="joinClubBtn">
              Join Club
            </button>
          </div>
        </div>

        <!-- Club Actions -->
        <div class="club-actions-section">
          <h3 style="margin-bottom: 2rem; text-align: center; color: #333">
            Club Activities
          </h3>
          <div class="club-actions-grid">
            <div class="action-card" id="addEventAction">
              <span class="action-icon">üìÖ</span>
              <div class="action-title">Add Event</div>
              <div class="action-description">
                Create a new event for club members
              </div>
            </div>
            <div class="action-card" id="groupChatAction">
              <span class="action-icon">üí¨</span>
              <div class="action-title">Group Chat</div>
              <div class="action-description">
                Join the club group discussion
              </div>
            </div>
            <div class="action-card" id="viewEventsAction">
              <span class="action-icon">üéØ</span>
              <div class="action-title">View Events</div>
              <div class="action-description">
                See all upcoming club events
              </div>
            </div>
          </div>
        </div>

        <!-- Members Section -->
        <div class="members-section">
          <h3 style="margin-bottom: 2rem; text-align: center; color: #333">
            Club Members
          </h3>
          <div class="members-grid" id="membersGrid">
            <!-- Members will be dynamically added here -->
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Chat Modal -->
  <div class="chat-modal" id="chatModal">
    <div class="chat-container">
      <div class="chat-header">
        <h3 id="chatTitle">Science Club Chat</h3>
        <button class="close-chat-btn" id="closeChatBtn">‚úï</button>
      </div>
      <div class="chat-messages" id="chatMessages">
        <!-- Sample messages -->
        <div class="message">
          <div class="message-avatar">J</div>
          <div class="message-content">
            Hey everyone! Welcome to the Science club chat. Feel free to share
            your thoughts and questions here.
          </div>
        </div>
        <div class="message">
          <div class="message-avatar">S</div>
          <div class="message-content">
            Thanks for creating this space! I'm excited to learn more about
            quantum physics.
          </div>
        </div>
        <div class="message own">
          <div class="message-avatar">Y</div>
          <div class="message-content">
            Great! I have some resources on quantum mechanics that I can
            share.
          </div>
        </div>
      </div>
      <div class="chat-input">
        <input type="text" placeholder="Type your message..." id="chatInputField" />
        <button id="sendMessageBtn">‚û§</button>
      </div>
    </div>
  </div>

  <!-- Event Creation Modal -->
  <div class="modal-overlay" id="eventModal">
    <div class="modal-container">
      <div class="modal-header">
        <div class="modal-title">
          <span>üìÖ</span>
          <h2>Create Club Event</h2>
        </div>
        <button class="modal-close" id="closeEventModal">‚úï</button>
      </div>
      <div class="modal-content">
        <form id="eventForm">
          <div class="form-group">
            <label for="eventTitle">Event Title:</label>
            <input type="text" id="eventTitle" name="eventTitle" placeholder="e.g. Physics Workshop" required />
          </div>

          <div class="form-group">
            <label for="eventDescription">Event Description:</label>
            <textarea id="eventDescription" name="eventDescription" rows="4"
              placeholder="Describe what participants will learn and what to expect..." required></textarea>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="eventDate">Event Date:</label>
              <input type="date" id="eventDate" name="eventDate" required />
            </div>
            <div class="form-group">
              <label for="eventTime">Time:</label>
              <input type="time" id="eventTime" name="eventTime" required />
            </div>
          </div>

          <div class="form-group">
            <label for="eventLocation">Location:</label>
            <input type="text" id="eventLocation" name="eventLocation" placeholder="e.g. Science Lab, Community Center"
              required />
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="maxParticipants">Max Participants:</label>
              <input type="number" id="maxParticipants" name="maxParticipants" placeholder="e.g. 20" min="1" max="100"
                required />
            </div>
            <div class="form-group">
              <label for="eventCost">Cost per Person:</label>
              <select id="eventCost" name="eventCost">
                <option value="0">Free</option>
                <option value="500">Rs. 500</option>
                <option value="1000">Rs. 1000</option>
                <option value="1500">Rs. 1500</option>
                <option value="2000">Rs. 2000</option>
              </select>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" id="cancelEventBtn">
          Cancel
        </button>
        <button type="submit" form="eventForm" class="btn btn-primary" id="createEventBtn">
          Create Event
        </button>
      </div>
    </div>
  </div>



  <!-- Footer -->
  <footer class="footer">
    <!-- Header Section -->


    <!-- Main Content Section -->
    <div class="footer-content">
      <!-- Column 1: Description and Social Media -->

      <div class="footer-column">
        <h3 class="footer-column-title">
          <img src="images/SkillHub LOGO 3.png" alt="SkillHub Logo" class="footer-logo-img">
          <span class="brand-text">SkillHub</span>
        </h3>
        <p>Connecting communities through skill sharing. Learn from your neighbors, teach what you love, and build
          lasting relationships in your local area.</p>
        <div class="social-icons">
          <a href="#" aria-label="Facebook">
            <div class="icon-circle"><img src="images\fb.png" alt="Facebook"> </div>
          </a>
          <a href="#" aria-label="Twitter">
            <div class="icon-circle"><img src="images\mdi_twitter.png" alt="Twitter"> </div>
          </a>
          <a href="#" aria-label="Instagram">
            <div class="icon-circle"><img src="images\mdi_instagram.png" alt="Instagram"> </div>
          </a>
          <a href="#" aria-label="LinkedIn">
            <div class="icon-circle"><img src="images\mdi_linkedin.png" alt="LinkedIn"> </div>
          </a>
        </div>
      </div>

      <!-- Column 2: Quick Links -->
      <div class="footer-columnn">
        <div class="footer-column">
          <h3 class="footer-column-title">Quick Links</h3>
          <ul>
            <li><a href="dashboard.html">Home</a></li>
            <li><a href="#about">About Us</a></li>
            <li><a href="#how-it-works">How it Works</a></li>
            <li><a href="services.html">Services</a></li>
            <li><a href="community.html">Community</a></li>
          </ul>
        </div>
      </div>
      <!-- Column 3: Support -->
      <div class="footer-columnn">
        <div class="footer-column">
          <h3 class="footer-column-title">Support</h3>
          <ul>
            <li><a href="#help">Help Center</a></li>
            <li><a href="#safety">Safety Guidelines</a></li>
            <li><a href="#contact">Contact Us</a></li>
            <li><a href="#faq">FAQs</a></li>
            <li><a href="#feedback">Give Feedback</a></li>
            <li><a href="#report">Report Issue</a></li>
            <li><a href="#accessibility">Accessibility</a></li>
          </ul>
        </div>
      </div>

      <!-- Column 4: Legal -->
      <div class="footer-columnn">
        <div class="footer-column">
          <h3 class="footer-column-title">Legal</h3>
          <ul>
            <li><a href="#terms">Terms of Services</a></li>
            <li><a href="#privacy">Privacy policy</a></li>
            <li><a href="#cookies">Cookie Policy</a></li>
            <li><a href="#guidelines">Community Guidelines</a></li>
          </ul>
        </div>
      </div>
      <!-- Column 5: Stay Connected -->
      <div class="footer-columnn">
        <div class="footer-column">
          <div class="footer-column stay-connected">
            <h3 class="footer-column-title">Stay Connected</h3>
            <p>Get updates on new skills, community events, and platform features.</p>
            <form class="subscription-form">
              <input type="email" placeholder="Enter your email address" aria-label="Email Address">
              <button type="submit">Subscribe</button>
            </form>
          </div>
        </div>
      </div>

  </footer>

  <!-- STEP 1: Add this div tag to any HTML page where you want the chatbot -->
  <div id="skillhub-chatbot-container"></div>

  <!-- STEP 2: Add this script tag once per page (preferably before closing body tag) -->
  <script>
    // Auto-load SkillHub chatbot when div is found
    document.addEventListener('DOMContentLoaded', function () {
      const container = document.getElementById('skillhub-chatbot-container');
      if (!container) return;

      // Inject CSS styles
      const styles = `
        <style id="skillhub-chatbot-styles">
        .skillhub-chat-icon {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(76, 175, 80, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 1001;
            border: none;
        }

        .skillhub-chat-icon:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 25px rgba(76, 175, 80, 0.5);
        }

        .skillhub-chat-icon.pulsing {
            animation: skillhub-pulse 2s infinite;
        }

        @keyframes skillhub-pulse {
            0% { box-shadow: 0 4px 20px rgba(76, 175, 80, 0.4); }
            50% { box-shadow: 0 4px 30px rgba(76, 175, 80, 0.8); }
            100% { box-shadow: 0 4px 20px rgba(76, 175, 80, 0.4); }
        }

        .skillhub-chat-icon svg {
            width: 28px;
            height: 28px;
            fill: white;
        }

        .skillhub-chat-container {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 400px;
            max-width: calc(100vw - 40px);
            height: 600px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.2);
            display: none;
            flex-direction: column;
            overflow: hidden;
            z-index: 1000;
            animation: skillhub-slideUp 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes skillhub-slideUp {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .skillhub-chat-header {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .skillhub-chat-header h3 {
            font-family: 'Arial', sans-serif;
            font-size: 18px;
            margin-bottom: 5px;
            margin: 0;
        }

        .skillhub-chat-header p {
            font-size: 14px;
            opacity: 0.9;
            margin: 5px 0 0 0;
        }

        .skillhub-close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s ease;
        }

        .skillhub-close-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .skillhub-voice-status {
            position: absolute;
            top: 15px;
            left: 15px;
            font-size: 12px;
            background: rgba(255, 255, 255, 0.2);
            padding: 4px 8px;
            border-radius: 12px;
            display: none;
        }

        .skillhub-voice-status.active {
            display: block;
            animation: skillhub-fadeIn 0.3s ease;
        }

        @keyframes skillhub-fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .skillhub-chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
        }

        .skillhub-message {
            margin-bottom: 16px;
            animation: skillhub-messageSlide 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes skillhub-messageSlide {
            from { 
                opacity: 0; 
                transform: translateY(20px) scale(0.95);
            }
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1);
            }
        }

        .skillhub-message.bot {
            text-align: left;
        }

        .skillhub-message.user {
            text-align: right;
        }

        .skillhub-message-content {
            display: inline-block;
            max-width: 85%;
            padding: 14px 18px;
            border-radius: 20px;
            font-size: 14px;
            line-height: 1.5;
            word-wrap: break-word;
            position: relative;
        }

        .skillhub-message.bot .skillhub-message-content {
            background: white;
            color: #333;
            border-bottom-left-radius: 8px;
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.1);
            border: 1px solid #e8e8e8;
        }

        .skillhub-message.user .skillhub-message-content {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border-bottom-right-radius: 8px;
            box-shadow: 0 3px 15px rgba(76, 175, 80, 0.3);
        }

        .skillhub-message.voice .skillhub-message-content::before {
            content: "üé§ ";
            font-size: 12px;
        }

        .skillhub-typing-indicator {
            display: none;
            align-items: center;
            gap: 8px;
            color: #666;
            font-style: italic;
            margin-bottom: 15px;
        }

        .skillhub-typing-dots {
            display: flex;
            gap: 4px;
        }

        .skillhub-typing-dots span {
            width: 8px;
            height: 8px;
            background: #4CAF50;
            border-radius: 50%;
            animation: skillhub-typing 1.4s infinite;
        }

        .skillhub-typing-dots span:nth-child(2) { animation-delay: 0.2s; }
        .skillhub-typing-dots span:nth-child(3) { animation-delay: 0.4s; }

        @keyframes skillhub-typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }

        .skillhub-voice-controls {
            display: flex;
            justify-content: center;
            padding: 10px 20px;
            background: white;
            border-top: 1px solid #e0e0e0;
            gap: 15px;
        }

        .skillhub-voice-btn {
            width: 50px;
            height: 50px;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            position: relative;
        }

        .skillhub-voice-btn.record {
            background: linear-gradient(135deg, #ff4757, #ff3742);
            color: white;
        }

        .skillhub-voice-btn.record:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 20px rgba(255, 71, 87, 0.4);
        }

        .skillhub-voice-btn.record.recording {
            animation: skillhub-recordPulse 1s infinite;
        }

        @keyframes skillhub-recordPulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255, 71, 87, 0.7); }
            50% { box-shadow: 0 0 0 10px rgba(255, 71, 87, 0); }
        }

        .skillhub-voice-btn.stop {
            background: linear-gradient(135deg, #ffa502, #ff6348);
            color: white;
        }

        .skillhub-voice-btn.play {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
        }

        .skillhub-voice-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .skillhub-chat-input {
            display: flex;
            padding: 20px;
            background: white;
            border-top: 1px solid #e0e0e0;
            gap: 10px;
        }

        .skillhub-chat-input input {
            flex: 1;
            padding: 14px 18px;
            border: 2px solid #e8e8e8;
            border-radius: 25px;
            outline: none;
            font-size: 14px;
            transition: all 0.2s ease;
            background: #f8f9fa;
        }

        .skillhub-chat-input input:focus {
            border-color: #4CAF50;
            background: white;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .skillhub-send-btn {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            border: none;
            border-radius: 50%;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .skillhub-send-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 20px rgba(76, 175, 80, 0.4);
        }

        .skillhub-send-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .skillhub-audio-visualizer {
            display: none;
            justify-content: center;
            align-items: center;
            height: 40px;
            margin: 10px 0;
        }

        .skillhub-audio-visualizer.active {
            display: flex;
        }

        .skillhub-audio-bar {
            width: 3px;
            height: 10px;
            background: #4CAF50;
            margin: 0 2px;
            border-radius: 2px;
            animation: skillhub-audioWave 1s infinite;
        }

        .skillhub-audio-bar:nth-child(2) { animation-delay: 0.1s; }
        .skillhub-audio-bar:nth-child(3) { animation-delay: 0.2s; }
        .skillhub-audio-bar:nth-child(4) { animation-delay: 0.3s; }
        .skillhub-audio-bar:nth-child(5) { animation-delay: 0.4s; }

        @keyframes skillhub-audioWave {
            0%, 100% { height: 10px; }
            50% { height: 30px; }
        }

        .skillhub-chat-messages::-webkit-scrollbar {
            width: 6px;
        }

        .skillhub-chat-messages::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .skillhub-chat-messages::-webkit-scrollbar-thumb {
            background: #4CAF50;
            border-radius: 10px;
        }

        .skillhub-chat-messages::-webkit-scrollbar-thumb:hover {
            background: #45a049;
        }

        .skillhub-error-message {
            background: #ffe6e6;
            color: #d8000c;
            padding: 10px;
            border-radius: 8px;
            margin: 10px 20px;
            font-size: 12px;
            border-left: 4px solid #d8000c;
        }

        @media (max-width: 480px) {
            .skillhub-chat-container {
                width: calc(100vw - 20px);
                height: calc(100vh - 120px);
                right: 10px;
                bottom: 90px;
            }
            
            .skillhub-chat-icon {
                right: 15px;
                bottom: 15px;
            }
        }
        </style>
    `;

      // Inject HTML structure
      const chatbotHTML = `
        <button class="skillhub-chat-icon" id="skillhub-chat-icon">
            <svg viewBox="0 0 24 24">
                <path d="M20,2H4A2,2 0 0,0 2,4V22L6,18H20A2,2 0 0,0 22,16V4A2,2 0 0,0 20,2M6,9V7H18V9H6M14,11V13H6V11H14M18,15H6V17H18V15Z"/>
            </svg>
        </button>

        <div class="skillhub-chat-container" id="skillhub-chat-container">
            <div class="skillhub-chat-header">
                <div class="skillhub-voice-status" id="skillhub-voice-status">üé§ Listening...</div>
                <button class="skillhub-close-btn" id="skillhub-close-btn">&times;</button>
                <h3>SkillHub AI Assistant</h3>
                <p>Voice & Text Support Available</p>
            </div>

            <div class="skillhub-chat-messages" id="skillhub-chat-messages">
                <div class="skillhub-message bot">
                    <div class="skillhub-message-content">
                        Hello! Welcome to SkillHub. I'm your AI assistant with voice support. You can type or speak to me about our platform features and get help with any technical difficulties. How can I assist you today?
                    </div>
                </div>
            </div>

            <div class="skillhub-audio-visualizer" id="skillhub-audio-visualizer">
                <div class="skillhub-audio-bar"></div>
                <div class="skillhub-audio-bar"></div>
                <div class="skillhub-audio-bar"></div>
                <div class="skillhub-audio-bar"></div>
                <div class="skillhub-audio-bar"></div>
            </div>

            <div class="skillhub-typing-indicator" id="skillhub-typing-indicator">
                <span>SkillHub AI is thinking</span>
                <div class="skillhub-typing-dots">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>

            <div class="skillhub-voice-controls">
                <button class="skillhub-voice-btn record" id="skillhub-record-btn" title="Start Recording">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.53 16.39,17.44 13,17.93V21H11V17.93C7.61,17.44 5,14.53 5,11H7A5,5 0 0,0 12,16A5,5 0 0,0 17,11H19Z"/>
                    </svg>
                </button>
                <button class="skillhub-voice-btn stop" id="skillhub-stop-btn" style="display:none;" title="Stop Recording">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M18,18H6V6H18V18Z"/>
                    </svg>
                </button>
                <button class="skillhub-voice-btn play" id="skillhub-play-btn" style="display:none;" title="Play Last Response">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M8,5.14V19.14L19,12.14L8,5.14Z"/>
                    </svg>
                </button>
            </div>

            <div class="skillhub-chat-input">
                <input type="text" id="skillhub-message-input" placeholder="Type your message or use voice..." />
                <button class="skillhub-send-btn" id="skillhub-send-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M2.01,21L23,12L2.01,3L2,10L17,12L2,14L2.01,21Z"/>
                    </svg>
                </button>
            </div>
        </div>
    `;

      // Check if styles already exist
      if (!document.getElementById('skillhub-chatbot-styles')) {
        document.head.insertAdjacentHTML('beforeend', styles);
      }

      // Insert chatbot HTML
      container.innerHTML = chatbotHTML;

      // Initialize chatbot functionality
      let skillhubChatOpen = false;
      let skillhubIsRecording = false;
      let skillhubMediaRecorder = null;
      let skillhubAudioChunks = [];
      let skillhubLastBotResponse = null;
      let skillhubIsProcessing = false;
      const skillhubSynth = window.speechSynthesis;

      function skillhubToggleChat() {
        const chatContainer = document.getElementById('skillhub-chat-container');
        const chatIcon = document.getElementById('skillhub-chat-icon');
        skillhubChatOpen = !skillhubChatOpen;
        chatContainer.style.display = skillhubChatOpen ? 'flex' : 'none';

        if (skillhubChatOpen) {
          chatIcon.classList.add('pulsing');
          document.getElementById('skillhub-message-input').focus();
        } else {
          chatIcon.classList.remove('pulsing');
          if (skillhubIsRecording) {
            skillhubStopRecording();
          }
        }
      }

      function skillhubAddMessage(content, isUser = false, isVoice = false) {
        const chatMessages = document.getElementById('skillhub-chat-messages');
        const messageDiv = document.createElement('div');
        messageDiv.className = `skillhub-message ${isUser ? 'user' : 'bot'}${isVoice ? ' voice' : ''}`;

        const contentDiv = document.createElement('div');
        contentDiv.className = 'skillhub-message-content';
        contentDiv.innerHTML = content;

        messageDiv.appendChild(contentDiv);
        chatMessages.appendChild(messageDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;

        if (!isUser) {
          skillhubLastBotResponse = content;
          document.getElementById('skillhub-play-btn').style.display = 'flex';
        }
      }

      function skillhubShowTypingIndicator() {
        document.getElementById('skillhub-typing-indicator').style.display = 'flex';
        document.getElementById('skillhub-chat-messages').scrollTop = document.getElementById('skillhub-chat-messages').scrollHeight;
      }

      function skillhubHideTypingIndicator() {
        document.getElementById('skillhub-typing-indicator').style.display = 'none';
      }

      function skillhubShowVoiceStatus(text) {
        const status = document.getElementById('skillhub-voice-status');
        status.textContent = text;
        status.classList.add('active');
      }

      function skillhubHideVoiceStatus() {
        document.getElementById('skillhub-voice-status').classList.remove('active');
      }

      async function skillhubGetBotResponse(userMessage, isVoiceInput = false) {
        const API_KEY = 'AIzaSyCsNiZthfSE-0R-kyqeoonXqEzEiJyu4cg';

        const systemPrompt = `You are a helpful customer support chatbot for SkillHub, a neighborhood-based skill exchange platform. Your role is to:

1. ONLY provide information about SkillHub platform features and help with technical difficulties
2. DO NOT reveal any business strategies, financial projections, marketing plans, or internal company information  
3. Keep responses concise, professional, and conversational (especially for voice interactions)
4. For voice inputs, respond in a natural, spoken style

About SkillHub:
- A web application platform for community-based learning
- Connects people who want to learn skills with those who can teach in their local area
- Features include:
  * Dual user roles (teachers and students)
  * Location-based matching algorithms
  * Multi-tiered verification system for safety
  * Comprehensive review and rating system with level advancement
  * Secure in-app messaging with content monitoring
  * Team formation for collaborative learning groups
  * Multi-language support with filtering options
  * Accessibility features including sign language support
  * Community building tools, forums, and event organization
  * Local business sponsorship opportunities
  * Non-monetary skill-for-skill exchanges

Common help topics:
- Account creation and profile setup
- Finding and connecting with teachers/students nearby
- Understanding the verification process
- Using the review and rating system
- In-app messaging and communication
- Forming and joining learning groups
- Language preferences and accessibility settings
- Technical troubleshooting and platform issues

${isVoiceInput ? 'This was a voice input, so respond conversationally.' : 'This was a text input.'}

If asked about business information, politely redirect to platform features or suggest contacting official channels.`;

        try {
          const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${API_KEY}`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              contents: [{
                parts: [{
                  text: `${systemPrompt}\n\nUser ${isVoiceInput ? '(voice)' : '(text)'}: ${userMessage}`
                }]
              }],
              generationConfig: {
                temperature: 0.7,
                topK: 40,
                topP: 0.95,
                maxOutputTokens: 2048,
              }
            })
          });

          if (!response.ok) {
            throw new Error(`API request failed: ${response.status}`);
          }

          const data = await response.json();
          return data.candidates[0].content.parts[0].text;
        } catch (error) {
          console.error('Error:', error);
          return "I'm sorry, I'm experiencing technical difficulties right now. Please try again later or contact our support team directly for assistance.";
        }
      }

      function skillhubSpeakResponse(text) {
        if (skillhubSynth.speaking) {
          skillhubSynth.cancel();
        }

        const cleanText = text.replace(/[*#_`]/g, '').replace(/\n+/g, '. ');
        const utterance = new SpeechSynthesisUtterance(cleanText);
        utterance.rate = 0.9;
        utterance.pitch = 1.0;
        utterance.volume = 0.8;

        const voices = skillhubSynth.getVoices();
        const preferredVoice = voices.find(voice =>
          voice.lang.includes('en') && (voice.name.includes('Neural') || voice.name.includes('Premium'))
        ) || voices.find(voice => voice.lang.includes('en'));

        if (preferredVoice) {
          utterance.voice = preferredVoice;
        }

        skillhubSynth.speak(utterance);
      }

      async function skillhubStartRecording() {
        if (skillhubIsProcessing) return;

        try {
          const stream = await navigator.mediaDevices.getUserMedia({
            audio: {
              echoCancellation: true,
              noiseSuppression: true,
              sampleRate: 44100
            }
          });

          skillhubMediaRecorder = new MediaRecorder(stream, {
            mimeType: 'audio/webm;codecs=opus'
          });

          skillhubAudioChunks = [];

          skillhubMediaRecorder.ondataavailable = (event) => {
            if (event.data.size > 0) {
              skillhubAudioChunks.push(event.data);
            }
          };

          skillhubMediaRecorder.onstop = async () => {
            const audioBlob = new Blob(skillhubAudioChunks, { type: 'audio/webm' });
            await skillhubProcessVoiceInput(audioBlob);
            stream.getTracks().forEach(track => track.stop());
          };

          skillhubMediaRecorder.start();
          skillhubIsRecording = true;

          document.getElementById('skillhub-record-btn').style.display = 'none';
          document.getElementById('skillhub-stop-btn').style.display = 'flex';
          document.getElementById('skillhub-record-btn').classList.add('recording');
          document.getElementById('skillhub-audio-visualizer').classList.add('active');

          skillhubShowVoiceStatus('üé§ Recording... Click stop when done');

        } catch (error) {
          console.error('Error starting recording:', error);
        }
      }

      function skillhubStopRecording() {
        if (skillhubMediaRecorder && skillhubIsRecording) {
          skillhubMediaRecorder.stop();
          skillhubIsRecording = false;

          document.getElementById('skillhub-record-btn').style.display = 'flex';
          document.getElementById('skillhub-stop-btn').style.display = 'none';
          document.getElementById('skillhub-record-btn').classList.remove('recording');
          document.getElementById('skillhub-audio-visualizer').classList.remove('active');

          skillhubShowVoiceStatus('üîÑ Processing audio...');
        }
      }

      async function skillhubProcessVoiceInput(audioBlob) {
        if (skillhubIsProcessing) return;
        skillhubIsProcessing = true;

        try {
          const arrayBuffer = await audioBlob.arrayBuffer();
          const base64Audio = btoa(String.fromCharCode(...new Uint8Array(arrayBuffer)));

          skillhubShowTypingIndicator();
          skillhubShowVoiceStatus('ü§ñ Transcribing and processing...');

          const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=AIzaSyCsNiZthfSE-0R-kyqeoonXqEzEiJyu4cg`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              contents: [{
                parts: [
                  {
                    text: "Please transcribe this audio and then provide a helpful response about SkillHub platform features or technical support. Focus only on platform information, not business strategies."
                  },
                  {
                    inline_data: {
                      mime_type: "audio/webm",
                      data: base64Audio
                    }
                  }
                ]
              }],
              generationConfig: {
                temperature: 0.7,
                topK: 40,
                topP: 0.95,
                maxOutputTokens: 2048,
              }
            })
          });

          if (!response.ok) {
            throw new Error(`API request failed: ${response.status}`);
          }

          const data = await response.json();
          const botResponse = data.candidates[0].content.parts[0].text;

          const lines = botResponse.split('\n');
          const transcription = lines.find(line => line.includes('transcription') || line.includes('said') || line.includes('asked')) || 'Voice message received';

          skillhubHideTypingIndicator();
          skillhubHideVoiceStatus();

          skillhubAddMessage(transcription.replace(/.*?[:]\s*/, ''), true, true);

          setTimeout(() => {
            skillhubAddMessage(botResponse);
            skillhubSpeakResponse(botResponse);
          }, 500);

        } catch (error) {
          console.error('Error processing voice:', error);
          skillhubHideTypingIndicator();
          skillhubHideVoiceStatus();
        } finally {
          skillhubIsProcessing = false;
        }
      }

      async function skillhubSendMessage() {
        const messageInput = document.getElementById('skillhub-message-input');
        const sendButton = document.getElementById('skillhub-send-btn');
        const message = messageInput.value.trim();

        if (!message || skillhubIsProcessing) return;

        skillhubIsProcessing = true;

        skillhubAddMessage(message, true);
        messageInput.value = '';

        messageInput.disabled = true;
        sendButton.disabled = true;

        skillhubShowTypingIndicator();

        try {
          const botResponse = await skillhubGetBotResponse(message, false);

          skillhubHideTypingIndicator();
          skillhubAddMessage(botResponse);

          if (document.getElementById('skillhub-play-btn').style.display === 'flex') {
            setTimeout(() => skillhubSpeakResponse(botResponse), 300);
          }

        } catch (error) {
          skillhubHideTypingIndicator();
          skillhubAddMessage("I apologize, but I'm having trouble processing your request right now. Please try again in a moment.");
          console.error('Send message error:', error);
        } finally {
          messageInput.disabled = false;
          sendButton.disabled = false;
          messageInput.focus();
          skillhubIsProcessing = false;
        }
      }

      function skillhubTogglePlayback() {
        if (skillhubSynth.speaking) {
          skillhubSynth.cancel();
        } else if (skillhubLastBotResponse) {
          skillhubSpeakResponse(skillhubLastBotResponse);
        }
      }

      function skillhubHandleKeyPress(event) {
        if (event.key === 'Enter' && !skillhubIsProcessing) {
          skillhubSendMessage();
        }
      }

      // Event Listeners
      document.getElementById('skillhub-chat-icon').addEventListener('click', skillhubToggleChat);
      document.getElementById('skillhub-close-btn').addEventListener('click', skillhubToggleChat);
      document.getElementById('skillhub-record-btn').addEventListener('click', skillhubStartRecording);
      document.getElementById('skillhub-stop-btn').addEventListener('click', skillhubStopRecording);
      document.getElementById('skillhub-play-btn').addEventListener('click', skillhubTogglePlayback);
      document.getElementById('skillhub-send-btn').addEventListener('click', skillhubSendMessage);
      document.getElementById('skillhub-message-input').addEventListener('keypress', skillhubHandleKeyPress);

      // Initialize voices
      if (skillhubSynth.onvoiceschanged !== undefined) {
        skillhubSynth.onvoiceschanged = () => {
          const voices = skillhubSynth.getVoices();
          console.log('SkillHub Chatbot: Available voices loaded');
        };
      }

      // Auto-focus input when chat opens
      document.getElementById('skillhub-message-input').addEventListener('focus', function () {
        setTimeout(() => {
          document.getElementById('skillhub-chat-messages').scrollTop = document.getElementById('skillhub-chat-messages').scrollHeight;
        }, 100);
      });

      // Keyboard shortcuts
      document.addEventListener('keydown', function (e) {
        // Only work when chatbot is active
        if (!skillhubChatOpen) return;

        // Space to start/stop recording (when not typing)
        if (e.code === 'Space' && e.target !== document.getElementById('skillhub-message-input')) {
          e.preventDefault();
          if (skillhubIsRecording) {
            skillhubStopRecording();
          } else {
            skillhubStartRecording();
          }
        }

        // Escape to stop recording or close chat
        if (e.key === 'Escape') {
          if (skillhubIsRecording) {
            skillhubStopRecording();
          } else {
            skillhubToggleChat();
          }
        }
      });

      // Handle page visibility changes
      document.addEventListener('visibilitychange', function () {
        if (document.hidden && skillhubIsRecording) {
          skillhubStopRecording();
        }
      });

      // Connection monitoring
      window.addEventListener('online', function () {
        if (skillhubChatOpen) {
          skillhubAddMessage("‚úÖ Connection restored. Voice and text features are available.", false);
        }
      });

      window.addEventListener('offline', function () {
        if (skillhubChatOpen) {
          skillhubAddMessage("‚ö†Ô∏è Connection lost. Voice features may be limited until connection is restored.", false);
        }
      });

      console.log('SkillHub Chatbot initialized successfully');
    });
  </script>

  <script src="js/community.js"></script>
  <script src="js/footer2.js"></script>
</body>

</html>